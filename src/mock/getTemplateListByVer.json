{
    "code": "0",
    "message": "操作成功",
    "errMsg": null,
    "data": [{
        "templateId": 55,
        "name": "标题",
        "templateCode": "title",
        "templateVer": "v1",
        "css": ".component-bk-title input[type=color] {\r\n    padding: 1px;\r\n}",
        "html": "<form onsubmit=\"return false;\" class=\"form-horizontal component-bk-title\">\r\n    <div class=\"form-group\"><label class=\"col-md-3 control-label\"><i class=\"asterisk\">*</i>标题名称</label>\r\n        <div class=\"col-md-8\"><input type=\"text\" name=\"titleName\" class=\"form-control\">\r\n            <span class=\"help-block m-b-none hide\">必填项不能为空</span></div>\r\n    </div>\r\n    <div class=\"form-group\"><label class=\"col-sm-3 control-label\">标题模版</label>\r\n        <div class=\"col-sm-9\">\r\n            <div class=\"radio-inline pdl0\"><label class=\"i-checks\"><input type=\"radio\" name=\"titleType\" value=\"1\">\r\n                <i></i> 模版一 </label></div>\r\n            <div class=\"radio-inline pdl0\"><label class=\"i-checks\"><input type=\"radio\" name=\"titleType\" value=\"2\">\r\n                <i></i> 模版二 </label></div>\r\n            <div class=\"radio-inline pdl0\"><label class=\"i-checks\"><input type=\"radio\" name=\"titleType\" value=\"3\">\r\n                <i></i> 模版三 </label></div>\r\n            <div class=\"radio-inline pdl0\"><label class=\"i-checks\"><input type=\"radio\" name=\"titleType\" value=\"4\">\r\n                <i></i> 模版四 </label></div>\r\n        </div>\r\n    </div>\r\n    <div class=\"form-group\"><label class=\"col-sm-3 control-label\">显示方式</label>\r\n        <div class=\"col-sm-9\">\r\n            <div class=\"radio-inline pdl0\"><label class=\"i-checks\"><input type=\"radio\" name=\"titlePosition\"\r\n                                                                          value=\"left\"> <i></i> 居左 </label></div>\r\n            <div class=\"radio-inline pdl0\"><label class=\"i-checks\"><input type=\"radio\" name=\"titlePosition\"\r\n                                                                          value=\"center\"> <i></i> 居中 </label></div>\r\n            <div class=\"radio-inline pdl0\"><label class=\"i-checks\"><input type=\"radio\" name=\"titlePosition\"\r\n                                                                          value=\"right\"> <i></i> 居右 </label></div>\r\n        </div>\r\n    </div>\r\n    <div class=\"form-group\"><label class=\"col-sm-3 control-label\">字体颜色</label>\r\n        <div class=\"col-sm-8 \">\r\n            <div class=\"row\">\r\n                <div class=\"col-sm-2\"><input type=\"color\" name=\"color\" class=\"form-control\"></div>\r\n                <div class=\"col-sm-4 text-center\"><label class=\" control-label \">字体大小</label></div>\r\n                <div class=\"col-sm-5\"><select name=\"fontSize\">\r\n                    <option value=\"12\">12</option>\r\n                    <option value=\"14\">14</option>\r\n                    <option value=\"16\">16</option>\r\n                    <option value=\"18\">18</option>\r\n                    <option value=\"20\">20</option>\r\n                    <option value=\"22\">22</option>\r\n                    <option value=\"24\">24</option>\r\n                    <option value=\"26\">26</option>\r\n                    <option value=\"28\">28</option>\r\n                    <option value=\"36\">36</option>\r\n                </select> (单位:px)\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class=\"form-group\"><label class=\"col-sm-3 control-label\">背景颜色</label>\r\n        <div class=\"col-sm-8 \">\r\n            <div class=\"row\">\r\n                <div class=\"col-sm-2\"><input type=\"color\" name=\"titleBgColor\" class=\"form-control\">\r\n                </div>\r\n                <div class=\"col-sm-4 text-center\"><label class=\" control-label \">分割线颜色</label></div>\r\n                <div class=\"col-sm-2\"><input type=\"color\" name=\"splitColor\" class=\"form-control\"></div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</form>",
        "js": "/**\r\n * Created by Jaron on 12/21/2016.\r\n */\r\nfunction initialize(elem, moduleContext) {\r\n    var variables = moduleContext.variables(),\r\n        $elem = $(elem);\r\n\r\n    $elem.find('input[type=text],input[type=color],select').each(function () {\r\n        var name = $(this).attr('name');\r\n        $(this).val(variables[name]);\r\n    });\r\n    $elem.find('input[type=radio][name=titleType][value=' + variables.titleType + ']').prop('checked', true);\r\n    $elem.find('input[type=radio][name=titlePosition][value=' + variables.titlePosition + ']').prop('checked', true);\r\n\r\n    $elem.on('input', 'input', function (e) {\r\n        var $target = $(e.target);\r\n        moduleContext.variables($target.attr('name'), $target.val());\r\n    });\r\n\r\n    $elem.on('change', 'input[type=radio],select', function (e) {\r\n        var $target = $(e.target);\r\n        moduleContext.variables($target.attr('name'), $target.val());\r\n    });\r\n}",
        "clientDialect": "js",
        "editorDialect": "js",
        "isLazy": 0,
        "isFrozen": 0,
        "renderType": null,
        "canDel": 1,
        "variables": "%7B%22titleName%22%3A%22%E8%BF%99%E6%98%AF%E9%BB%98%E8%AE%A4%E6%A0%87%E9%A2%98%22%2C%22titleType%22%3A%223%22%2C%22titlePosition%22%3A%22left%22%2C%22color%22%3A%22%23b48b32%22%2C%22fontSize%22%3A%2222%22%2C%22titleBgColor%22%3A%22%23ffffff%22%2C%22splitColor%22%3A%22%23b48b32%22%7D",
        "groupType": 1,
        "previewImg": "http://cdn.oudianyun.com/ds/trunk/back-cms/1482316964510_3487_104.jpg",
        "companyId": null,
        "front": false
    }, {
        "templateId": 1006017609000004,
        "name": "富文本",
        "templateCode": "rich-text",
        "templateVer": "v1",
        "css": "",
        "html": "<div class=\"form-group\">\r\n    <label class=\"col-md-3 control-label\">富文本:</label>\r\n    <div class=\"col-md-8\">\r\n        <vue-ueditor :content=\"content\" :options=\"options\" v-on:conchanged=\"contentChanged\"></vue-ueditor>\r\n    </div>\r\n</div>\r\n\r\n",
        "js": "function initialize(template){\r\n    return {\r\n        template:template,\r\n        props:['moduleContext'],\r\n        data:function(){\r\n            return {\r\n                options:''\r\n            }\r\n        },\r\n        computed:{\r\n            content:function(){\r\n                return this.moduleContext.variables().con || '这里是富文本';\r\n            }\r\n        },\r\n        methods:{\r\n            contentChanged:function(con){\r\n                var cont = {\r\n                    \"con\":con || '这里是富文本'\r\n                }\r\n                this.moduleContext.variables(cont);\r\n            }\r\n        }\r\n    }\r\n}",
        "clientDialect": "vue",
        "editorDialect": "vue",
        "isLazy": 0,
        "isFrozen": 0,
        "renderType": null,
        "canDel": 1,
        "variables": "%7B%0A%20%20%20%20%22con%22%3A%22%E8%BF%99%E9%87%8C%E6%98%AF%E5%AF%8C%E6%96%87%E6%9C%AC%E5%86%85%E5%AE%B9%22%0A%7D",
        "groupType": 1,
        "previewImg": "http://cdn.oudianyun.com/lyf/branch/back-cms/1486974550919_6477_192.jpg",
        "companyId": null,
        "front": false
    }, {
        "templateId": 3454,
        "name": "公告信息",
        "templateCode": "bulletin",
        "templateVer": "v1",
        "css": ".bulletin-bk-v1 .mgR10 {\r\n  margin-right: 10px; }\r\n\r\n.bulletin-bk-v1 .btn {\r\n  position: relative; }\r\n\r\n.bulletin-bk-v1 .icon-bulletin {\r\n  max-width: 28px;\r\n  max-height: 28px; }\r\n\r\n.bulletin-bk-v1 .btn-color {\r\n  width: 100px;\r\n  height: 35px;\r\n  padding: 0 2px; }\r\n\r\n.bulletin-bk-v1 .link-wrapper {\r\n  margin-top: 3px; }\r\n",
        "html": "<div class=\"bulletin-bk-v1\" v-cloak>\r\n    <div class=\"form-group\">\r\n        <label class=\"col-sm-3 control-label\">图标:</label>\r\n        <div class=\"col-sm-8\">\r\n            <img class=\"icon-bulletin mgR10\" :src=\"imgUrl\">\r\n            <button class=\"btn btn-default mgR10\">上传替换<cms-img-upload :callback=\"onUploadSuccess\"></cms-img-upload></button>\r\n            <button class=\"btn btn-default\" @click=\"restoreDefaultImage\">恢复默认</button>\r\n        </div>\r\n    </div>\r\n    <div class=\"form-group\">\r\n        <label class=\"col-sm-3 control-label\"><i class=\"asterisk\">*</i>内容:</label>\r\n        <div class=\"col-sm-8\">\r\n            <textarea class=\"form-control\" name=\"adcontent\" cols=\"40\" rows=\"3\" maxlength=\"30\" v-model=\"content\" placeholder=\"内容在30个字以内\"></textarea>\r\n        </div>\r\n    </div>\r\n    <div class=\"form-group\">\r\n        <label class=\"col-sm-3 control-label\">文字颜色:</label>\r\n        <div class=\"col-sm-8\">\r\n            <input type=\"color\" class=\"btn-color\" v-model=\"fontColor\">\r\n        </div>\r\n    </div>\r\n    <div class=\"form-group\">\r\n        <label class=\"col-sm-3 control-label\">背景颜色:</label>\r\n        <div class=\"col-sm-8\">\r\n            <input type=\"color\" class=\"btn-color\" v-model=\"bgColor\">\r\n        </div>\r\n    </div>\r\n    <div class=\"form-group\">\r\n        <label class=\"col-sm-3 control-label\">链接到:</label>\r\n        <div class=\"col-sm-8\">\r\n            <cms-link exclude-plugins=\"link-brand\" v-model=\"link\" :view=\"{label: false}\"></cms-link>\r\n        </div>\r\n    </div>\r\n</div>\r\n",
        "js": "function initialize(template) {\r\n    var defaultImgUrl = \"http://static.lyf.dev.laiyifen.com/cms/front/ncms/images/icon-bulletin.png\";\r\n\r\n    return {\r\n        template: template,\r\n        props: ['moduleContext'],\r\n        data: function() {\r\n            var variables = this.moduleContext.variables();\r\n            \r\n            if (!variables.imgUrl) {\r\n                variables.imgUrl = defaultImgUrl;\r\n            }\r\n\r\n            if (!variables.link) {\r\n                variables.link = {};\r\n            }\r\n\r\n            return variables;\r\n        },\r\n        methods: {\r\n            //图片上传成功回调\r\n            onUploadSuccess: function(filepath) {\r\n                this.imgUrl = filepath;\r\n                console.log(\"upload file:\" + filepath);\r\n            },\r\n\r\n            //恢复默认图片\r\n            restoreDefaultImage: function() {\r\n                this.imgUrl = defaultImgUrl;\r\n            }\r\n\r\n        }\r\n    }\r\n}\r\n",
        "clientDialect": "vue",
        "editorDialect": "vue",
        "isLazy": 0,
        "isFrozen": 0,
        "renderType": null,
        "canDel": 1,
        "variables": "%7B%0A%20%20%20%20%22imgUrl%22:%20%22http://static.lyf.dev.laiyifen.com/cms/front/ncms/images/icon-bulletin.png%22,%0A%20%20%20%20%22fontColor%22:%22#333333%22,%0A%20%20%20%20%22bgColor%22:%20%22#eeeeee%22,%0A%20%20%20%20%22content%22:%20%22%E8%AF%B7%E5%9C%A8%E8%BF%99%E9%87%8C%E8%BE%93%E5%85%A5%E5%85%AC%E5%91%8A%E5%86%85%E5%AE%B9%22,%0A%20%20%20%20%22link%22:%20%7B%7D%0A%7D",
        "groupType": 1,
        "previewImg": "http://cdn.oudianyun.com/lyf/branch/back-cms/1486977331711_8564_142.jpg",
        "companyId": null,
        "front": false
    }, {
        "templateId": 3455,
        "name": "辅助空白",
        "templateCode": "spacing",
        "templateVer": "v1",
        "css": ".margin-slider {\n  width: 85%;\n  height: 4px;\n  background-color: #ddd;\n  float: left;\n  margin-top: 17px;\n  padding-top: 0;\n  overflow: inherit; }\n\n.margin-slider .ui-slider-handle {\n  background-color: #23b7e5 !important;\n  top: -0.5em;\n  border-radius: 50%; }\n\n.margin-slider-value {\n  display: inline-block;\n  float: left;\n  margin-top: 5px;\n  margin-left: 10px;\n  line-height: 30px;\n  font-size: 16px; }\n\n.onerow-multipic-editor .cms-pic {\n  position: relative;\n  width: 110px;\n  height: 110px;\n  float: right;\n  border: solid 1px #ddd;\n  background-repeat: no-repeat;\n  background-position: center center;\n  background-size: 100% 100%; }\n\n.cms-pic .prev-img {\n  width: 100%;\n  height: 100%; }\n\n.cms-pic .re-upload {\n  display: inline-block;\n  padding: 5px;\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  width: 100%;\n  text-align: center;\n  background-color: #ddd;\n  color: #fff;\n  opacity: 0.9; }\n\n.cms-pic .re-upload:hover {\n  opacity: 1.0; }\n\n.cms-pic .no-img {\n  padding: 25px 10px; }\n\n.create-aditem {\n  border: 2px dashed #c0c0c0;\n  text-align: center;\n  line-height: 40px;\n  height: 40px;\n  cursor: pointer; }\n\n.height-label {\n  margin-top: 7px; }\n\n.color-pick {\n  margin-top: 10px; }",
        "html": "<div class=\"index-spacing-bk-v1\" v-cloak>\n    <div class=\"line line-dashed b-b line-lg\"></div>\n    <div class=\"form-group\">\n        <label class=\"col-sm-3 control-label height-label\">空白高度:</label>\n        <div class=\"col-sm-8\">\n            <div id=\"marginSlider\" class=\"margin-slider ui-slider ui-slider-horizontal ui-widget ui-widget-content ui-corner-all\">\n                <span class=\"ui-slider-handle ui-state-default ui-corner-all\" tabindex=\"0\" style=\"left: 100%;\"></span>\n            </div>\n            <span class=\"margin-slider-value\">{{vars.height}}px</span>\n        </div>\n    </div>\n    <div class=\"line line-dashed b-b line-lg\"></div>\n    <div class=\"form-group color-pick\">\n        <label class=\"col-sm-3 control-label \">空白底色:</label>\n        <div class=\"col-sm-2\">\n            <input type=\"color\" class=\"btn-color form-control\" v-model=\"vars.color\">\n        </div>\n        <div class=\"col-sm-5\">\n            <span></span><button class=\"btn btn-xs\" @click=\"reset\">重置</button>\n        </div>\n    </div>\n</div>",
        "js": "function initialize(template) {\n    var slide;\n    return {\n        template: template,\n        props: ['moduleContext'],\n        data: function() {\n            var variables = this.moduleContext.variables();\n            return {\n                vars: variables,\n                height: 25,\n                color:'#ffffff'\n            };\n        },\n        mounted: function() {\n            this.initSlider();\n\n\n        },\n        methods: {\n            initSlider: function(vars) {\n                var marginSlider = $(\"#marginSlider\");\n                var self = this;\n                //slider 初始化\n                slide=marginSlider.slider({\n                    min: 1,\n                    max: 50,\n                    value: self.vars.height,\n                    slide: function(e, ui) {\n                        self.vars.height = ui.value;\n                    }\n                });\n            },\n            reset:function (vars) {\n                this.vars.height=this.height;\n                this.vars.color=this.color;\n                $(\"#marginSlider\").slider('value',this.height);\n            }\n        }\n    }\n}",
        "clientDialect": "vue",
        "editorDialect": "vue",
        "isLazy": 0,
        "isFrozen": 0,
        "renderType": null,
        "canDel": 1,
        "variables": "%7B%0A%20%20%22height%22%3A%20%2225%22%2C%0A%20%20%22color%22%3A%20%22%23ffffff%22%0A%7D",
        "groupType": 1,
        "previewImg": "http://cdn.oudianyun.com/lyf/branch/back-cms/1486973494398_4039_129.jpg",
        "companyId": null,
        "front": false
    }, {
        "templateId": 3456,
        "name": "页签",
        "templateCode": "tabs",
        "templateVer": "v1",
        "css": ".tabs-bk-v1 .mgR10 {\n  margin-right: 10px; }\n\n.tabs-bk-v1 .btn {\n  position: relative; }\n\n.tabs-bk-v1 .icon-tabs {\n  max-width: 28px;\n  max-height: 28px; }\n\n.tabs-bk-v1 .btn-color {\n  width: 70px;\n  height: 24px;\n  padding: 0 2px; }\n\n.tabs-bk-v1 .link-wrapper {\n  margin-top: 3px; }\n\n.tabs-bk-v1 .add-item {\n  border: 2px dashed #c0c0c0;\n  text-align: center;\n  line-height: 40px;\n  height: 40px;\n  cursor: pointer; }\n\n.tabs-bk-v1 .center {\n  text-align: center; }\n\n.tabs-bk-v1 .close {\n  float: none; }\n\n.tabs-bk-v1 .link-wrapper .link-set {\n  margin-left: 0; }\n\n.tab-bk-item {\n  cursor: pointer; }\n  .tab-bk-item:hover {\n    background-color: #eee; }\n\n.tab-bk-active {\n  background-color: #eee;\n  cursor: default; }\n\n.glyphicon-btn-group {\n  float: right; }\n\n.glyphicon-btn {\n  cursor: pointer;\n  margin-left: 10px;\n  color: #999;\n  font-size: 18px; }",
        "html": "<div class=\"tabs-bk-v1\" v-cloak>\n    <div class=\"form-group\">\n        <label class=\"col-sm-3 control-label\">页签样式:</label>\n        <div class=\"col-sm-8\">\n            <div class=\"radio-inline pdl0\">\n                <label class=\"i-checks\">\n                    <input type=\"radio\" name=\"tabStyle\" value=\"style1\" v-model=\"vars.tabStyle\">\n                    <i></i> 样式1\n                </label>\n            </div>\n            <div class=\"radio-inline pdl0\">\n                <label class=\"i-checks\">\n                    <input type=\"radio\" name=\"tabStyle\" value=\"style2\" v-model=\"vars.tabStyle\">\n                    <i></i> 样式2\n                </label>\n            </div>\n            <div class=\"radio-inline pdl0\">\n                <label class=\"i-checks\">\n                    <input type=\"radio\" name=\"tabStyle\" value=\"style3\" v-model=\"vars.tabStyle\">\n                    <i></i> 样式3\n                </label>\n            </div>\n        </div>\n    </div>\n    <div class=\"form-group\">\n        <label class=\"col-sm-3 control-label\">默认状态:</label>\n        <div class=\"col-sm-2\">\n            <label class=\"control-label\">文字颜色:</label>\n            <input type=\"color\" class=\"btn-color\" v-model=\"vars.fontColor\">\n        </div>\n        <div class=\"col-sm-2\">\n            <label class=\"control-label\">背景颜色:</label>\n            <input type=\"color\" class=\"btn-color\" v-model=\"vars.bgColor\">\n        </div>\n    </div>\n    <div class=\"form-group\">\n        <label class=\"col-sm-3 control-label\">选中状态:</label>\n        <div class=\"col-sm-2\">\n            <label class=\"control-label\">文字颜色:</label>\n            <input type=\"color\" class=\"btn-color\" v-model=\"vars.activeFontColor\">\n        </div>\n        <div class=\"col-sm-2\">\n            <label class=\"control-label\">背景颜色:</label>\n            <input type=\"color\" class=\"btn-color\" v-model=\"vars.activeBgColor\">\n        </div>\n    </div>\n    <div class=\"form-group\">\n        <label class=\"col-sm-3 control-label\">页签内容展示:</label>\n        <div class=\"col-sm-8\">\n            <div class=\"radio-inline pdl0\">\n                <label class=\"i-checks\">\n                    <input type=\"radio\" name=\"tabMode\" value=\"1\" @change=\"switchTabMode\" v-model=\"tabMode\">\n                    <i></i> 同屏展示\n                </label>\n            </div>\n            <div class=\"radio-inline pdl0\">\n                <label class=\"i-checks\">\n                    <input type=\"radio\" name=\"tabMode\" value=\"2\" @change=\"switchTabMode\" v-model=\"tabMode\">\n                    <i></i> 分屏展示\n                </label>\n            </div>\n        </div>\n    </div>\n    \n    <template v-for=\"(tab, index) in vars.tabs\">\n        <div class=\"tab-bk-item\" :class=\"{'tab-bk-active': vars.currentTab == index}\" @click=\"selectedTab(index)\">\n            <div class=\"line line-dashed b-b line-lg\"></div>\n            <div class=\"form-group\">\n                <label class=\"col-sm-3 control-label\"><i class=\"asterisk\">*</i>页签标题:</label>\n                <div class=\"col-sm-8\">\n                    <input type=\"text\" class=\"form-control\" v-model=\"tab.title\">\n                </div>\n                <div class=\"col-sm-1 center\" v-if=\"index>0\">\n                    <button type=\"button\" class=\"close\" @click=\"removeTab(index)\"><span aria-hidden=\"true\">&times;</span></button>\n                </div>\n            </div>\n            <div class=\"form-group\" v-if=\"vars.tabMode==1\">\n                <label class=\"col-sm-3 control-label\">设置链接:</label>\n                <div class=\"col-sm-8\">\n                    <cms-link exclude-plugins=\"link-brand\" v-model=\"tab.link\" :view=\"{label: false}\"></cms-link>\n                </div>\n            </div>\n            <div class=\"form-group\" v-if=\"vars.tabMode==2\">\n                <label class=\"col-sm-3 control-label\">关联栏目:</label>\n                <div class=\"col-sm-8\">\n                    <div class=\"link-wrapper\"><span class=\"link-set\" @click=\"selectModule(index)\">选择关联的栏目（已选{{tab.modules.length || 0}}个）</span></div>\n                </div>\n            </div>\n            <div class=\"row\" v-if=\"vars.tabMode==2 && vars.currentTab == index && tab.modules\">\n                <div class=\"col-sm-offset-3 col-sm-8\">\n                    <ul class=\"list-group\">\n                      <li class=\"list-group-item\" v-for=\"(m, mindex) in tab.modules\">{{ m.title }} <div class=\"glyphicon-btn-group\"><span v-if=\"mindex != 0\" class=\"glyphicon-btn glyphicon glyphicon-arrow-up\" @click=\"moduleMove(index, mindex, 'up')\" aria-hidden=\"true\"></span><span v-if=\"mindex != tab.modules.length-1\" class=\"glyphicon-btn glyphicon glyphicon-arrow-down\" @click=\"moduleMove(index, mindex, 'down')\" aria-hidden=\"true\"></span><span class=\"glyphicon-btn glyphicon glyphicon-remove\" @click=\"moduleDelete(index, mindex)\" aria-hidden=\"true\"></span></div></li>\n                    </ul>\n                </div>\n            </div>\n            <div class=\"form-group\">\n                <label class=\"col-sm-3 control-label\">是否默认选中:</label>\n                <div class=\"col-sm-8\">\n                    <label class=\"i-checks\">\n                        <input type=\"radio\" name=\"defaultTab\" :value=\"index\" v-model=\"vars.defaultTab\">\n                        <i></i> 是\n                    </label>\n                </div>\n            </div>\n        </div>\n    </template>\n    <div class=\"line line-dashed b-b line-lg\"></div>\n    <div class=\"form-group\">\n        <div class=\"col-sm-8  col-sm-offset-3\">\n            <div class=\"add-item\" @click=\"createTab\">添加</div>\n        </div>\n    </div>\n</div>",
        "js": "function initialize(template) {\n    var host = appRender.host,\n        msgBus = appRender.msgBus,\n        utils = appRender.utils;\n\n    function msgAlert(msg) {\n        msgBus.$emit('modal-open', {\n            title: '信息提示',\n            message: msg,\n            action: [{\n                clazz: { 'btn-info': true },\n                name: '确定',\n                callback: function(close) {\n                    close();\n                }\n            }]\n        });\n    }\n\n    return {\n        template: template,\n        props: ['moduleContext'],\n        data: function() {\n            var variables = this.moduleContext.variables();\n\n            return {\n                vars: variables,\n                index: variables.tabs.length || 0,\n                tabMode: variables.tabMode || 1\n            };\n        },\n        watch: {\n            \"vars.tabStyle\": function(val) {\n                var style = this.vars.tabStyles[val];\n                if (style) {\n                    this.vars.fontColor = style.fontColor;\n                    this.vars.bgColor = style.bgColor;\n                    this.vars.activeFontColor = style.activeFontColor;\n                    this.vars.activeBgColor = style.activeBgColor;\n                }\n            }\n        },\n        mounted: function() {\n            msgBus.$on('selected-modules', this.selectedModules);\n\n            var self = this;\n            this.moduleContext.on(\"context-removing\", function() {\n                self.removeAllModules();\n            });\n        },\n        methods: {\n            switchTabMode: function() {\n                if (this.vars.tabMode != this.tabMode) {\n                    var r = null;\n                    if (this.tabMode == 1) {\n                        r = window.confirm(\"切换页签模式会丢失页签栏目数据\");\n                    } else if (this.tabMode == 2) {\n                        r = window.confirm(\"切换页签模式会丢失页签链接数据\");\n                    }\n\n                    if (!r) {\n                        this.tabMode = this.vars.tabMode;\n                    } else {\n                        this.vars.tabMode = this.tabMode;\n\n                        var variables = this.moduleContext.variables();\n                        var tabs = variables.tabs;\n                        var moduleIds = [];\n                        utils.map(tabs, function(m) {\n                                utils.map(m.modules, function(md) {\n                                    if (md.moduleId) {\n                                        moduleIds.push(md.moduleId);\n                                    }\n                                });\n\n                            })\n                            //同步子模板选中状态\n                        if (moduleIds.length > 0) {\n                            this.updateRenderType(moduleIds, 0);\n                        }\n\n                        //通知页面渲染被页签移除的栏目\n                        msgBus.$emit(\"addModules\", moduleIds)\n                            //页签同步更新\n                        this.vars.syncTick = Math.random();\n                        //清空子模板数据\n                        this.emptyModuleData();\n                    }\n                }\n            },\n\n            //新增页签\n            createTab: function() {\n                this.vars.tabs.push({\n                    title: \"页签标题\" + (++this.index),\n                    link: {},\n                    modules: []\n                });\n            },\n\n            //移除页签\n            removeTab: function(index) {\n                var variables = this.moduleContext.variables();\n                var moduleIds = [];\n                utils.each(variables.tabs[index].modules, function(m) {\n                    if (m.moduleId) {\n                        moduleIds.push(m.moduleId);\n                    }\n                });\n\n                //同步子模板选中状态\n                if (moduleIds.length > 0) {\n                    this.updateRenderType(moduleIds, 0);\n                }\n\n                //如果删除的是默认选中的页签，指定第一个页签为默认。\n                if (index == this.vars.defaultTab) {\n                    this.vars.defaultTab = 0;\n                } else if (index < this.vars.defaultTab) {\n                    //如果删除当前默认页签之前的页签，default的值需要减1\n                        this.vars.defaultTab -= 1;\n                }\n\n                //通知页面渲染被页签移除的元素\n                msgBus.$emit(\"addModules\", moduleIds);\n                this.vars.tabs.splice(index, 1);\n                this.saveModuleData();\n\n                var self = this;\n                //删除后选中第一个页签\n                setTimeout(function() {\n                    self.selectedTab(0);\n                }, 100);\n            },\n\n            //选择页签\n            selectedTab: function(index) {\n                this.vars.currentTab = index;\n            },\n\n            //选择栏目弹框\n            selectModule: function(index) {\n                this.vars.currentTab = index;\n                msgBus.$emit(\"select-module\", index, this.moduleContext.moduleId);\n            },\n\n            //选择子模板\n            selectedModules: function(targetModuleId, checkedList, index) {\n                //只处理当前栏目选中栏目的事件\n                if (targetModuleId != this.moduleContext.moduleId) {\n                    console.log(\"do not process selectedModules: \" + this.moduleContext.moduleId);\n                    return;\n                }\n                //alert(mIds);\n                var modules = [];\n                var moduleIds = [];\n                for (var i = 0; i < checkedList.length; i++) {\n                    modules.push({\n                        title: checkedList[i].customName,\n                        moduleId: checkedList[i].cmsModuleId\n                    });\n                    moduleIds.push(checkedList[i].cmsModuleId);\n                }\n\n                if (this.vars.tabs[index]) {\n                    this.vars.tabs[index].modules = this.unionModules(this.vars.tabs[index].modules, modules);\n                    this.vars.syncTick = Math.random();\n                }\n\n                //通知页面移除选中的栏目（由页签渲染）\n                msgBus.$emit(\"removeModules\", moduleIds);\n                this.updateRenderType(moduleIds, 1);\n                this.saveModuleData();\n            },\n\n            //取栏目的并集\n            unionModules: function(oldModules, newModules) {\n                var moduleIds = [];\n                var modules = [];\n                var allModules = oldModules.concat(newModules);\n\n                utils.each(allModules, function(module) {\n                    if (moduleIds.indexOf(module.moduleId) < 0) {\n                        modules.push(module);\n                        moduleIds.push(module.moduleId);\n                    }\n                });\n\n                return modules;\n            },\n\n            //更新栏目的renderType（0-由页面渲染，1-页面不渲染页签渲染）\n            updateRenderType: function(moduleIds, type) {\n                var args = {\n                    cmsModuleIds: moduleIds,\n                    renderType: type\n                };\n\n                this.$http.post(host + '/cmsModuleTemplateWrite/updateRenderType.do', args).then(function(resp) {\n                    if (resp.data.code != 0) {\n                        msgAlert(resp.data.message);\n                    }\n                });\n\n                //更新本地栏目的状态\n                for (var i = 0; i < appRender.plans.length; i++) {\n                    for (var j = 0; j < moduleIds.length; j++) {\n                        if (appRender.plans[i].moduleId == moduleIds[j]) {\n                            appRender.plans[i].renderType = type;\n                            continue;\n                        }\n                    }\n                }\n\n            },\n\n            //清空页签所有数据\n            emptyModuleData: function() {\n                this.vars.tabs = [{\n                    \"title\": \"页签标题1\",\n                    \"link\": {},\n                    \"modules\": []\n                }];\n\n                this.saveModuleData();\n            },\n\n            //保存页签栏目数据\n            saveModuleData: function() {\n                var self = this;\n                var params = /pageId=(\\d+)/i.exec(window.location.href);\n                var pageId = params.length == 2 && params[1];\n                var params = [];\n                params[0] = {\n                    pageId: pageId,\n                    moduleId: self.moduleContext.moduleId,\n                    startDate: self.moduleContext.startDate,\n                    endDate: self.moduleContext.endDate,\n                    customName: self.moduleContext.customName,\n                    templateCode: self.moduleContext.templateCode,\n                    templateVer: self.moduleContext.templateVer,\n                    sort: self.moduleContext.sort,\n                    isChange: 0,\n                    isDeleted: 0,\n                    variables: JSON.stringify(self.vars)\n                };\n\n                self.$http.post(host + '/cmsModuleTemplateWrite/updateModule.do', params).then(function(resp) {\n                    if (resp.data.code != 0) {\n                        msgAlert(resp.data.message);\n                    }\n                });\n\n            },\n\n            //子模板移动\n            moduleMove: function(index, mindex, direction) {\n                var tabs = this.vars.tabs;\n                var modules = utils.copy(this.vars.tabs[index].modules);\n                var temp = modules[mindex];\n                if (direction == 'up') {\n                    modules[mindex] = modules[mindex - 1];\n                    modules[mindex - 1] = temp;\n                } else if (direction == 'down') {\n                    modules[mindex] = modules[mindex + 1];\n                    modules[mindex + 1] = temp;\n                }\n                this.vars.tabs[index].modules = modules;\n                this.vars.syncTick = Math.random();\n                this.saveModuleData();\n            },\n\n            //移除关联的栏目\n            moduleDelete: function(index, mindex) {\n                var tabs = this.vars.tabs;\n                var modules = tabs[index].modules;\n                var deletedModule\n                this.updateRenderType([modules[mindex].moduleId], 0);\n                //通知页面渲染被页签移除的栏目\n                msgBus.$emit(\"addModules\", modules[mindex].moduleId);\n                modules.splice(mindex, 1);\n                //页签同步更新\n                this.vars.syncTick = Math.random();\n                this.saveModuleData();\n            },\n\n            //标记页签所有的栏目为删除状态（分屏模式）\n            removeAllModules: function() {\n                var variables = this.moduleContext.variables();\n                var tabs = variables.tabs;\n                var moduleIds = [];\n                utils.each(tabs, function(m) {\n                    utils.each(m.modules, function(md) {\n                        if (md.moduleId) {\n                            moduleIds.push(md.moduleId);\n                        }\n                    });\n                });\n\n                for (var i = 0; i < appRender.plans.length; i++) {\n                    for (var j = 0; j < moduleIds.length; j++) {\n                        if (appRender.plans[i].moduleId == moduleIds[j]) {\n                            appRender.plans[i]._deleted = true;\n                            continue;\n                        }\n                    }\n                }\n            }\n        }\n    }\n}\n//# sourceURL=tabs.bk.js",
        "clientDialect": "vue",
        "editorDialect": "vue",
        "isLazy": 0,
        "isFrozen": 0,
        "renderType": null,
        "canDel": 1,
        "variables": "%7B%20%22tabMode%22%3A%201%2C%20%22defaultTab%22%3A%200%2C%20%22currentTab%22%3A%200%2C%20%22syncTick%22%3A%200%2C%20%22fontColor%22%3A%22%23333333%22%2C%20%22bgColor%22%3A%20%22%23eeeeee%22%2C%20%22activeFontColor%22%3A%20%22%23ff8040%22%2C%20%22activeBgColor%22%3A%20%22%23ff8040%22%2C%20%22tabStyle%22%3A%20%22style1%22%2C%20%22tabStyles%22%3A%20%7B%20%22style1%22%3A%20%7B%20%22fontColor%22%3A%22%23333333%22%2C%20%22bgColor%22%3A%20%22%23eeeeee%22%2C%20%22activeFontColor%22%3A%20%22%23ff8040%22%2C%20%22activeBgColor%22%3A%20%22%23ff8040%22%20%7D%2C%20%22style2%22%3A%20%7B%20%22fontColor%22%3A%22%23333333%22%2C%20%22bgColor%22%3A%20%22%23eeeeee%22%2C%20%22activeFontColor%22%3A%20%22%23ffffff%22%2C%20%22activeBgColor%22%3A%20%22%23ff8040%22%20%7D%2C%20%22style3%22%3A%20%7B%20%22fontColor%22%3A%22%23333333%22%2C%20%22bgColor%22%3A%20%22%23eeeeee%22%2C%20%22activeFontColor%22%3A%20%22%23ffffff%22%2C%20%22activeBgColor%22%3A%20%22%23ff8040%22%20%7D%20%7D%2C%20%22tabs%22%3A%20%5B%20%7B%20%22title%22%3A%20%22%E9%A1%B5%E7%AD%BE%E6%A0%87%E9%A2%981%22%2C%20%22link%22%3A%20%7B%7D%2C%20%22modules%22%3A%20%5B%5D%20%7D%20%5D%20%7D",
        "groupType": 4,
        "previewImg": "http://cdn.oudianyun.com/lyf/branch/back-cms/1486973676226_8124_129.jpg",
        "companyId": null,
        "front": false
    }, {
        "templateId": 3457,
        "name": "商品搜索",
        "templateCode": "search",
        "templateVer": "v1",
        "css": "",
        "html": "<div class=\"index-search-bk-v1\" v-cloak>\r\n</div>",
        "js": "function initialize(template) {\r\n    var slide;\r\n    return {\r\n        template: template,\r\n        props: ['moduleContext'],\r\n        data: function() {\r\n            var variables = this.moduleContext.variables();\r\n            return {\r\n                vars: variables,\r\n            };\r\n        },\r\n        mounted: function() {\r\n\r\n\r\n        },\r\n        methods: {\r\n            \r\n        }\r\n    }\r\n}\r\n\r\n",
        "clientDialect": "vue",
        "editorDialect": "vue",
        "isLazy": 0,
        "isFrozen": 0,
        "renderType": null,
        "canDel": 1,
        "variables": "%7B%0A%20%20%22height%22%3A%20%2225%22%2C%0A%20%20%22color%22%3A%20%22%23ffffff%22%0A%7D",
        "groupType": 1,
        "previewImg": "http://cdn.oudianyun.com/lyf/branch/back-cms/1486974009082_7832_140.jpg",
        "companyId": null,
        "front": false
    }, {
        "templateId": 3458,
        "name": "视频",
        "templateCode": "video",
        "templateVer": "v1",
        "css": ".index-video-bk-v1 .btn {\r\n  margin-top: 2px; }\r\n\r\n.index-video-bk-v1 .mgt10 {\r\n  margin-top: 10px; }\r\n\r\n.index-video-bk-v1 .margin-slider {\r\n  width: 85%;\r\n  height: 4px;\r\n  background-color: #ddd;\r\n  float: left;\r\n  margin-top: 17px;\r\n  padding-top: 0;\r\n  overflow: inherit; }\r\n\r\n.index-video-bk-v1 .margin-slider .ui-slider-handle {\r\n  background-color: #23b7e5 !important;\r\n  top: -0.5em;\r\n  border-radius: 50%; }\r\n\r\n.index-video-bk-v1 .margin-slider-value {\r\n  display: inline-block;\r\n  float: left;\r\n  margin-top: 5px;\r\n  margin-left: 10px;\r\n  line-height: 30px;\r\n  font-size: 16px; }\r\n\r\n.index-video-bk-v1 .cms-img {\r\n  position: relative;\r\n  width: 200px;\r\n  height: 150px;\r\n  border-radius: 5px;\r\n  border: solid 1px #ddd;\r\n  background-repeat: no-repeat;\r\n  background-position: center center;\r\n  background-size: 100% 100%; }\r\n  .index-video-bk-v1 .cms-img div {\r\n    width: 100%;\r\n    height: 100%; }\r\n\r\n.index-video-bk-v1 .prev-img {\r\n  width: 100%;\r\n  height: 100%; }\r\n\r\n.index-video-bk-v1 .re-upload {\r\n  display: inline-block;\r\n  padding: 5px;\r\n  position: absolute;\r\n  bottom: 0;\r\n  left: 0;\r\n  width: 100%;\r\n  text-align: center;\r\n  background-color: #ddd;\r\n  color: #fff;\r\n  opacity: 0.9; }\r\n\r\n.index-video-bk-v1 .no-img {\r\n  padding: 10px; }\r\n\r\n.index-video-bk-v1 .create-item {\r\n  border: 2px dashed #c0c0c0;\r\n  text-align: center;\r\n  line-height: 40px;\r\n  height: 40px;\r\n  cursor: pointer; }\r\n",
        "html": "<div class=\"index-video-bk-v1\" v-cloak>\r\n    <div class=\"line line-dashed b-b line-lg\"></div>\r\n    <div class=\"form-group\">\r\n        <label for=\"\" class=\"col-sm-3 control-label\">\r\n            视频地址\r\n        </label>\r\n        <div class=\"col-sm-5\">\r\n            <input type=\"text\" class=\"form-control\" v-model=\"data.url\">\r\n        </div>\r\n    </div>\r\n    <div class=\"form-group\">\r\n        <div class=\"col-sm-3\"></div>\r\n        <div class=\"col-sm-5\">\r\n            请填写完整的视频连接地址，仅支持播放MP4格式\r\n        </div>\r\n    </div>\r\n    <div class=\"line line-dashed b-b line-lg\"></div>\r\n    <div class=\"form-group\">\r\n        <label class=\"col-sm-3 control-label\" style=\"margin-top: 40px;\">\r\n            上传封面\r\n        </label>\r\n        <div class=\"col-sm-8\">\r\n            <label class=\"control-label mgt-7px\">备注：视频封面宽度为100%，高度自适应</label>\r\n            <div class=\"cms-img\">\r\n                <div v-if=\"data.src\">\r\n                    <img class=\"prev-img\" :src=\"data.src\" :alt=\"data.desc\">\r\n                    <a class=\"re-upload\" href=\"javascript:void(0)\">重新上传</a>\r\n                </div>\r\n                <div class=\"no-img\" v-if=\"!data.src\">\r\n                    <p class=\"text-center\"><img src=\"http://static.lyf.dev.laiyifen.com/cms/front/ncms/images/add.jpg\"></p>\r\n                    <p class=\"text-center blue\">添加图片</p>\r\n                </div>\r\n                <cms-img-upload :callback=\"addImage\" :data=\"data\"></cms-img-upload>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>",
        "js": "function initialize(template) {\r\n    var slide;\r\n    return {\r\n        template: template,\r\n        props: ['moduleContext'],\r\n        data: function() {\r\n            var variables = this.moduleContext.variables();\r\n            return {\r\n                vars: variables,\r\n                url:variables.url,\r\n                imgUrl:variables.imgUrl,\r\n                data:variables.video\r\n            };\r\n        },\r\n        mounted: function() {\r\n\r\n        },\r\n        methods: {\r\n            addImage: function (url, data) {\r\n                if (url != null) {\r\n                    data.src = url;\r\n                }\r\n            },\r\n            setUrl: function (item) {\r\n                item.url = item.link.data;\r\n            },\r\n        }\r\n    }\r\n}\r\n\r\n",
        "clientDialect": "vue",
        "editorDialect": "vue",
        "isLazy": 0,
        "isFrozen": 0,
        "renderType": null,
        "canDel": 1,
        "variables": "%7B%0A%20%20%22video%22%3A%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%22link%22%3A%20%7B%7D%2C%0A%20%20%20%20%20%20%22url%22%3A%20%22%22%2C%0A%20%20%20%20%20%20%22src%22%3A%20%22%22%2C%0A%20%20%20%20%20%20%22desc%22%3A%20%22%22%0A%20%20%20%20%7D%0A%20%20%2C%0A%20%20%22margin%22%3A%200%0A%7D",
        "groupType": 1,
        "previewImg": "http://cdn.oudianyun.com/lyf/branch/back-cms/1486974120772_3791_163.jpg",
        "companyId": null,
        "front": false
    }, {
        "templateId": 3459,
        "name": "排行榜",
        "templateCode": "rank-landing-page",
        "templateVer": "v1",
        "css": "",
        "html": "<cms-goods :module-context=\"moduleContext\" :options=\"vars\" v-on:view-changed=\"viewChange\"></cms-goods>",
        "js": "function initialize(template){\n    return {\n        template:template,\n        props:['moduleContext'],\n        computed:{\n            vars:function(){\n\n                return this.moduleContext.variables();\n            }\n        },\n        methods:{\n            viewChange:function(items,mdContext){\n                var mock = {\n                    moduleDataList:mdContext.goodsList().moduleDataList,\n                    categoryList:mdContext.goodsList().categoryList || []\n                }\n                var vars = {\n                    displayNum: mdContext.variables().displayNum,\n                    displayBuyBtn: mdContext.variables().displayBuyBtn,\n                    displayNav: mdContext.variables().displayNav\n                }\n                this.moduleContext.variables(vars);\n                this.moduleContext.goodsList(mock);\n            }\n        }\n    }\n}",
        "clientDialect": "vue",
        "editorDialect": "vue",
        "isLazy": 0,
        "isFrozen": 0,
        "renderType": null,
        "canDel": 1,
        "variables": "%7B%20%20%20%0A%20%20%22displayNum%22%3A%20100%2C%0A%20%20%22displayBuyBtn%22%3A%200%2C%0A%20%20%22displayNav%22%3A%200%2C%0A%20%20%22goodsType%22%3A%200%2C%0A%20%20%22useBuyBtn%22%3Atrue%2C%0A%20%20%22useNav%22%3Afalse%2C%0A%20%20%22useBuyConditions%22%3Atrue%2C%0A%20%20%22conditionType%22%3Anull%2C%0A%20%20%22salesSort%22%3Anull%2C%0A%20%20%22salesNum%22%3Anull%0A%7D",
        "groupType": 3,
        "previewImg": "http://cdn.oudianyun.com/lyf/branch/back-cms/1486977271447_3997_176.jpg",
        "companyId": null,
        "front": false
    }, {
        "templateId": 3460,
        "name": "图片导航",
        "templateCode": "channel",
        "templateVer": "v1",
        "css": ".channel-bk-v1 .mgt10 {\r\n  margin-top: 10px; }\r\n\r\n.channel-bk-v1 .margin-slider {\r\n  width: 85%;\r\n  height: 4px;\r\n  background-color: #ddd;\r\n  float: left;\r\n  margin-top: 17px;\r\n  padding-top: 0;\r\n  overflow: inherit; }\r\n\r\n.channel-bk-v1 .margin-slider .ui-slider-handle {\r\n  background-color: #23b7e5 !important;\r\n  top: -0.5em;\r\n  border-radius: 50%; }\r\n\r\n.channel-bk-v1 .margin-slider-value {\r\n  display: inline-block;\r\n  float: left;\r\n  margin-top: 5px;\r\n  margin-left: 10px;\r\n  line-height: 30px;\r\n  font-size: 16px; }\r\n\r\n.channel-bk-v1 .cms-img {\r\n  position: relative;\r\n  width: 110px;\r\n  height: 110px;\r\n  border-radius: 5px;\r\n  float: right;\r\n  border: solid 1px #ddd;\r\n  background-repeat: no-repeat;\r\n  background-position: center center;\r\n  background-size: 100% 100%; }\r\n  .channel-bk-v1 .cms-img div {\r\n    width: 100%;\r\n    height: 100%; }\r\n\r\n.channel-bk-v1 .prev-img {\r\n  width: 100%;\r\n  height: 100%; }\r\n\r\n.channel-bk-v1 .re-upload {\r\n  display: inline-block;\r\n  padding: 5px;\r\n  position: absolute;\r\n  bottom: 0;\r\n  left: 0;\r\n  width: 100%;\r\n  text-align: center;\r\n  background-color: #ddd;\r\n  color: #fff;\r\n  opacity: 0.9; }\r\n\r\n.channel-bk-v1 .no-img {\r\n  padding: 10px; }\r\n\r\n.channel-bk-v1 .create-item {\r\n  border: 2px dashed #c0c0c0;\r\n  text-align: center;\r\n  line-height: 40px;\r\n  height: 40px;\r\n  cursor: pointer; }\r\n",
        "html": "<div class=\"form-horizental channel-bk-v1\">\r\n    <div class=\"form-group\">\r\n        <label class=\"col-sm-3 control-label\">导航模板</label>\r\n        <div class=\"col-sm-9\">\r\n            <div class=\"radio-inline pdl0\" v-for=\"option in vars.mode\">\r\n                <label class=\"i-checks\">\r\n                    <input type=\"radio\" name=\"channel-type\" :value=\"option.type\" v-model=\"vars.selected\"\r\n                           @change=\"selectionChange(option)\">\r\n                    <i></i>\r\n                    {{option.label}}\r\n                </label>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <template v-for=\"channel in vars.channels\">\r\n        <div class=\"line line-dashed b-b line-lg\"></div>\r\n        <div class=\"form-group\">\r\n            <div class=\"col-sm-3\">\r\n                <div class=\"cms-img\">\r\n                    <div v-if=\"channel.src\">\r\n                        <img class=\"prev-img\" :src=\"channel.src\">\r\n                        <a class=\"re-upload\" href=\"javascript:void(0)\">重新上传</a>\r\n                    </div>\r\n                    <div class=\"no-img\" v-if=\"!channel.src\">\r\n                        <p class=\"text-center\"><img src=\"http://static.lyf.dev.laiyifen.com/cms/front/ncms/images/add.jpg\"></p>\r\n                        <p class=\"text-center blue\">添加图片</p>\r\n                    </div>\r\n                    <cms-img-upload :callback=\"addImage\" :data=\"channel\"></cms-img-upload>\r\n                </div>\r\n            </div>\r\n            <div class=\"col-sm-8\">\r\n                <label class=\"control-label mgt-7px\" v-show=\"vars.selected == 1\">备注：添加图尺寸为88px x 88px</label>\r\n                <label class=\"control-label mgt-7px\" v-show=\"vars.selected == 2\">备注：添加图尺寸为80px x 80px</label>\r\n                <label class=\"control-label mgt-7px\" v-show=\"vars.selected == 3\">备注：添加图尺寸为70px x 70px</label>\r\n                <div class=\"mgt10\">\r\n                    <input class=\"form-control magt15\" placeholder=\"请输入导航名称\" v-model=\"channel.text\">\r\n                </div>\r\n                <cms-link exclude-plugins=\"link-brand\" v-model=\"channel.link\" @input=\"setUrl(channel)\"></cms-link>\r\n            </div>\r\n        </div>\r\n    </template>\r\n</div>",
        "js": "/**\r\n * Created by Jaron on 2/12/2017.\r\n */\r\nfunction initialize(template) {\r\n    return {\r\n        template: template,\r\n        props: ['moduleContext'],\r\n        data: function () {\r\n            var vars = this.moduleContext.variables();\r\n            return {\r\n                selected: vars.mode.find(function (el) {\r\n                    return el.type == vars.selected;\r\n                }),\r\n                vars: vars\r\n            }\r\n        },\r\n        methods: {\r\n            addImage: function (url, data) {\r\n                if (url != null) {\r\n                    data.src = url;\r\n                }\r\n            },\r\n            setUrl: function (item) {\r\n                item.url = item.link.data;\r\n            },\r\n            selectionChange: function (mode) {\r\n                this.vars.selected = mode.type;\r\n                this.vars.channels.length = 0;\r\n\r\n                for (var i = 0; i < mode.num; i++) {\r\n                    this.vars.channels.push({\r\n                        link: {},\r\n                        url: '',\r\n                        src: 'http://static.lyf.dev.laiyifen.com/cms/front/ncms/images/182x182.png',\r\n                        text: ''\r\n                    })\r\n                }\r\n            }\r\n        }\r\n    }\r\n}",
        "clientDialect": "vue",
        "editorDialect": "vue",
        "isLazy": 0,
        "isFrozen": 0,
        "renderType": null,
        "canDel": 0,
        "variables": "%7B%22mode%22%3A%5B%7B%22label%22%3A%22%E6%A8%A1%E6%9D%BF%E4%B8%80%22%2C%22type%22%3A1%2C%22num%22%3A4%7D%2C%7B%22label%22%3A%22%E6%A8%A1%E6%9D%BF%E4%BA%8C%22%2C%22type%22%3A2%2C%22num%22%3A5%7D%2C%7B%22label%22%3A%22%E6%A8%A1%E6%9D%BF%E4%B8%89%22%2C%22type%22%3A3%2C%22num%22%3A6%7D%5D%2C%22selected%22%3A1%2C%22channels%22%3A%5B%7B%22link%22%3A%7B%7D%2C%22url%22%3A%22%22%2C%22src%22%3A%22http%3A%2F%2Fstatic.lyf.dev.laiyifen.com%2Fcms%2Ffront%2Fncms%2Fimages%2F182x182.png%22%2C%22text%22%3A%22%E5%AF%BC%E8%88%AA%E4%B8%80%22%7D%2C%7B%22link%22%3A%7B%7D%2C%22url%22%3A%22%22%2C%22src%22%3A%22http%3A%2F%2Fstatic.lyf.dev.laiyifen.com%2Fcms%2Ffront%2Fncms%2Fimages%2F182x182.png%22%2C%22text%22%3A%22%E5%AF%BC%E8%88%AA%E4%BA%8C%22%7D%2C%7B%22link%22%3A%7B%7D%2C%22url%22%3A%22%22%2C%22src%22%3A%22http%3A%2F%2Fstatic.lyf.dev.laiyifen.com%2Fcms%2Ffront%2Fncms%2Fimages%2F182x182.png%22%2C%22text%22%3A%22%E5%AF%BC%E8%88%AA%E4%B8%89%22%7D%2C%7B%22link%22%3A%7B%7D%2C%22url%22%3A%22%22%2C%22src%22%3A%22http%3A%2F%2Fstatic.lyf.dev.laiyifen.com%2Fcms%2Ffront%2Fncms%2Fimages%2F182x182.png%22%2C%22text%22%3A%22%E5%AF%BC%E8%88%AA%E5%9B%9B%22%7D%5D%7D",
        "groupType": 4,
        "previewImg": "http://cdn.oudianyun.com/lyf/branch/back-cms/1486881136892_9580_179.jpg",
        "companyId": null,
        "front": false
    }, {
        "templateId": 3461,
        "name": "单列大图",
        "templateCode": "goods-r1c1b",
        "templateVer": "v1",
        "css": null,
        "html": "<cms-goods :module-context=\"moduleContext\" :options=\"vars\" v-on:view-changed=\"viewChange\"></cms-goods>",
        "js": "function initialize(template){\n    return {\n        template:template,\n        props:['moduleContext'],\n        computed:{\n            vars:function(){\n                return this.moduleContext.variables();\n            }\n        },\n        methods:{\n            viewChange:function(items,mdContext){\n                var vars = {\n                    displayNum: mdContext.variables().displayNum,\n                    displayBuyBtn: mdContext.variables().displayBuyBtn,\n                    displayNav: mdContext.variables().displayNav,\n                    goodsType: mdContext.variables().goodsType\n                };\n                this.moduleContext.variables(vars);\n            }\n        }\n    }\n}",
        "clientDialect": "vue",
        "editorDialect": "vue",
        "isLazy": 0,
        "isFrozen": 0,
        "renderType": null,
        "canDel": 1,
        "variables": "%7B%0A%20%20%22displayNum%22%3A%20100%2C%0A%20%20%22displayBuyBtn%22%3A%200%2C%0A%20%20%22displayNav%22%3A%200%2C%0A%20%20%22goodsType%22%3A%200%2C%0A%20%20%22useBuyBtn%22%3Atrue%2C%0A%20%20%22useNav%22%3Atrue%2C%0A%20%20%22useBuyConditions%22%3Afalse%0A%7D",
        "groupType": 2,
        "previewImg": "http://cdn.oudianyun.com/lyf-local/branch/back-cms/1495423359498_1145_76.jpg@base@tag=imgScale&q=80",
        "companyId": null,
        "front": false
    }, {
        "templateId": 3462,
        "name": "一行三列",
        "templateCode": "goods-r1c3",
        "templateVer": "v1",
        "css": null,
        "html": "<cms-goods :module-context=\"moduleContext\" :options=\"vars\" v-on:view-changed=\"viewChange\"></cms-goods>",
        "js": "function initialize(template){\n    return {\n        template:template,\n        props:['moduleContext'],\n        computed:{\n            vars:function(){\n                return this.moduleContext.variables();\n            }\n        },\n        methods:{\n            viewChange:function(items,mdContext){\n                var vars = {\n                    displayNum: mdContext.variables().displayNum,\n                    displayBuyBtn: mdContext.variables().displayBuyBtn,\n                    displayNav: mdContext.variables().displayNav,\n                    goodsType: mdContext.variables().goodsType\n                };\n                this.moduleContext.variables(vars);\n            }\n        }\n    }\n}",
        "clientDialect": "vue",
        "editorDialect": "vue",
        "isLazy": 0,
        "isFrozen": 0,
        "renderType": null,
        "canDel": 1,
        "variables": "%7B%0A%20%20%22displayNum%22%3A%20100%2C%0A%20%20%22displayBuyBtn%22%3A%200%2C%0A%20%20%22displayNav%22%3A%200%2C%0A%20%20%22goodsType%22%3A%200%2C%0A%20%20%22useBuyBtn%22%3Atrue%2C%0A%20%20%22useNav%22%3Atrue%2C%0A%20%20%22useBuyConditions%22%3Afalse%0A%7D",
        "groupType": 2,
        "previewImg": "http://cdn.oudianyun.com/lyf-local/branch/back-cms/1495423382491_1637_29.jpg@base@tag=imgScale&q=80",
        "companyId": null,
        "front": false
    }, {
        "templateId": 3463,
        "name": "平台领券",
        "templateCode": "multi-coupons",
        "templateVer": "v1",
        "css": ".multi-coupons-bk-v1 .link-wrapper {\n  margin-top: 4px; }\n\n.multi-coupons-bk-v1 .link-wrapper .link-set {\n  margin-left: 0px; }",
        "html": "<div class=\"multi-coupons-bk-v1\">\n    <div class=\"line line-dashed b-b line-lg\"></div>\n    <div class=\"form-group\">\n        <label class=\"col-sm-3 control-label\">显示样式</label>\n        <div class=\"col-sm-9\">\n            <div class=\"radio-inline pdl0\">\n                <label class=\"i-checks\">\n                    <input type=\"radio\" name=\"display-type\" value=\"r1c1\" v-model=\"vars.displayType\">\n                    <i></i>\n                    一行一个\n                </label>\n            </div>\n            <div class=\"radio-inline pdl0\">\n                <label class=\"i-checks\">\n                    <input type=\"radio\" name=\"display-type\" value=\"r1c3\" v-model=\"vars.displayType\">\n                    <i></i>\n                    一行三个\n                </label>\n            </div>\n        </div>\n    </div>\n    <div class=\"line line-dashed b-b line-lg\"></div>\n    <div class=\"form-group\">\n        <label class=\"col-sm-3 control-label\">\n            楼层标题\n        </label>\n        <div class=\"col-sm-8\" :class=\"{'has-error': $v.vars.title.$error}\">\n            <input type=\"text\" placeholder=\"2-6个字以内\" class=\"form-control\" v-model=\"vars.title\" @input=\"showError\"/>\n        </div>\n    </div>\n    <div class=\"line line-dashed b-b line-lg\"></div>\n    <div class=\"form-group\">\n        <label class=\"col-sm-3 control-label\">\n            楼层图标\n        </label>\n        <div class=\"col-sm-8\">\n            <div class=\"cms-img\">\n                <div v-if=\"vars.icon\">\n                    <img class=\"prev-img\" :src=\"vars.icon\" :alt=\"vars.title\">\n                    <a class=\"re-upload\" href=\"javascript:void(0)\">重新上传</a>\n                </div>\n                <div class=\"no-img\" v-if=\"!vars.icon\">\n                    <p class=\"text-center\"><img src=\"http://static.lyf.dev.laiyifen.com/cms/front/ncms/images/add.jpg\"></p>\n                    <p class=\"text-center blue\">添加图片</p>\n                </div>\n                <cms-img-upload :callback=\"addImage\" :data=\"vars\"></cms-img-upload>\n            </div>\n        </div>\n    </div>\n    <div class=\"line line-dashed b-b line-lg\"></div>\n    <div class=\"form-group\">\n        <label class=\"col-sm-3 control-label\">\n            楼层跳转地址\n        </label>\n        <div class=\"col-sm-3\" :class=\"{'has-error': $v.vars.linkTitle.$error}\">\n            <input type=\"text\" class=\"form-control\" v-model=\"vars.linkTitle\" placeholder=\"2-6个字以内\" @input=\"showError\"/>\n        </div>\n        <div class=\"col-sm-6\">\n            <cms-link exclude-plugins=\"link-brand link-groups link-multi\" v-model=\"vars.link\" :view=\"{label: false}\"></cms-link>\n        </div>\n    </div>\n    <div class=\"line line-dashed b-b line-lg\"></div>\n    <div class=\"form-group\">\n        <div class=\"col-sm-8 col-sm-offset-3\">\n            <div class=\"checkbox-inline pdl0\">\n                <label class=\"i-checks\">\n                    <input type=\"checkbox\" name=\"hideTile\" value=\"r1c1\" v-model=\"vars.hideTitle\">\n                    <i></i>\n                    隐藏楼层标题\n                </label>\n            </div>\n        </div>\n    </div>\n    <div class=\"line line-dashed b-b line-lg\"></div>\n    <div class=\"form-group\">\n        <div class=\"col-sm-8\">\n            <a class=\"btn btn-info\" @click=\"add\">选择优惠券活动</a>\n        </div>\n    </div>\n    <div class=\"pintuan-table\">\n        <div class=\"form-group\">\n            <div class=\"col-sm-8\">\n                <a class=\"btn btn-info\" @click=\"batchRemove\">批量删除</a>\n            </div>\n        </div>\n        <div class=\"col-sm-12\">\n            <grids-table :query-adaptor=\"refreshGoodsList\" ref=\"table\" _key=\"refId\" auto-read>\n                <template scope=\"item\" slot=\"body\">\n                    <grid-column :scope=\"item\" _checkbox _ref=\"checked\" :checked-list=\"checkedList\"></grid-column>\n                    <grid-column :scope=\"item\" header=\"优惠券活动ID\" _ref=\"refId\"\n                                 :style=\"{'max-width':'100px'}\"></grid-column>\n                    <grid-column :scope=\"item\" header=\"优惠券活动名称\" _ref=\"refTitle\" :style=\"{'max-width':'100px'}\"></grid-column>\n                    <grid-column :scope=\"item\" header=\"券活动日期\" _ref=\"startTime,endTime\" :_computed=\"duration\" :style=\"{'max-width':'100px'}\"></grid-column>\n                    <grid-column :scope=\"item\" header=\"面值\" _ref=\"couponAmount\" :style=\"{'max-width':'100px'}\"></grid-column>\n                    <grid-column :scope=\"item\" header=\"顺序\">\n                        <grid-act-input :scope=\"item\" _number _ref=\"sortVal\" @change=\"resort\"></grid-act-input>\n                    </grid-column>\n                    <grid-column :scope=\"item\" header=\"操作\">\n                        <grid-act-click :scope=\"item\" label=\"删除\" @click=\"remove\"\n                                        clazz=\"btn-danger\"></grid-act-click>\n                    </grid-column>\n                </template>\n                <template scope=\"info\" slot=\"foot\">\n                    <grid-pagination :scope=\"info\" slot=\"foot\"></grid-pagination>\n                </template>\n            </grids-table>\n        </div>\n    </div>\n</div>",
        "js": "function initialize(template) {\n    var host = appRender.host,\n        utils = appRender.utils,\n        msgBus = appRender.msgBus,\n        params = utils.urlParams();\n        timeF = 'YYYY-MM-DD HH:mm:ss',\n        type = {\n            COUPON: 5,\n            CODE_COUPON: 6,\n            SMS_COUPON: 7,\n            CARD: 8,\n            MULTI_COUPONS:13\n        };\n\n    function msgAlert(msg) {\n        msgBus.$emit('modal-open', {\n            title: '信息提示',\n            message: msg,\n            action: [{\n                clazz: {'btn-info': true},\n                name: '确定',\n                callback: function (close) {\n                    close();\n                }\n            }]\n        });\n    }\n\n    function rmAlert(func) {\n        msgBus.$emit('modal-open', {\n            title: '温馨提示',\n            message: '确定要删除此券活动吗?',\n            action: [{\n                clazz: {'btn-info': true},\n                name: '取消',\n                callback: function (close) {\n                    close();\n                }\n            }, {\n                clazz: {'btn-info': true},\n                name: '确定',\n                callback: function (close) {\n                    func();\n                    close();\n                }\n            }]\n        });\n    }\n\n    return {\n        template: template,\n        props: ['moduleContext'],\n        data: function () {\n            var vars = this.moduleContext.variables();\n            return {\n                vars: vars,\n                checkedList: [],\n            }\n        },\n        validations: function () {\n            return {\n                vars: {\n                    title: {\n                        minLength:window.validators.minLength(2),\n                        maxLength:window.validators.maxLength(6)\n                    },\n                    linkTitle:{\n                        minLength:window.validators.minLength(2),\n                        maxLength:window.validators.maxLength(6)\n                    }\n                }\n            }\n        },\n        methods: {\n            duration: function (item, refs) {\n                refs = refs.split(',');\n                return moment(item[refs[0]]).format(timeF) + '-' + moment(item[refs[1]]).format(timeF);\n            },\n            useLimit: function (item, ref) {\n                return '满' + item[ref] + '可用';\n            },\n            addImage: function (url, data) {\n                if (url != null) {\n                    data.icon = url;\n                }\n            },\n            refreshTemplate: function (goodsList, categoryList) {\n                this.moduleContext.goodsList({\n                    moduleDataList: goodsList,\n                    categoryList: categoryList || []\n                });\n            },\n\n            refreshGoodsList: function (pagination) {\n                var self = this;\n                return self.$http.get(host + '/cmsModuleDataRead/queryCmsModuleRefList.do', {\n                    params: {\n                        moduleId: self.moduleContext.moduleId,\n                        pageNo: pagination.current,\n                        pageSize: pagination.step\n                    }\n                }).then(function (resp) {\n                    if (resp.data.code == 0) {\n                        resp = resp.data.data;\n\n                        if (resp.obj == null) {\n                            self.refreshTemplate([], []);\n                            return {\n                                listObj: null,\n                                total: 0\n                            }\n                        } else {\n                            var goodsList = resp.obj.refDataList;\n\n                            self.$http.get(host + '/cmsModuleDataRead/queryProductCategory.do', {\n                                params: {moduleId: self.moduleContext.moduleId}\n                            }).then(function (resp) {\n                                if (resp.data.code == 0) {\n                                    var categoryList = resp.data.data;\n                                    self.refreshTemplate(goodsList, categoryList);\n                                } else {\n                                    msgAlert(resp.data.message);\n                                }\n                            });\n                            return {\n                                listObj: goodsList,\n                                total: resp.total\n                            };\n                        }\n                    } else {\n                        msgAlert(resp.data.message);\n                    }\n                })\n            },\n\n            resort: function (item, value) {\n                var self = this;\n                self.$http.post(host + '/cmsModuleDataWrite/updateModuleRefSortVal.do', {\n                    id: Number(item.id),\n                    cmsModuleId: self.moduleContext.moduleId,\n                    sortValue: Number(value)\n                }).then(function (resp) {\n                    if (resp.data.code == 0 && resp.data.data == true) {\n                        msgAlert('修改成功');\n                        self.$children[2].readSource();\n                    } else {\n                        msgAlert(resp.data.message);\n                    }\n                });\n            },\n\n            add: function () {\n                msgBus.$emit('coupon-searching', this.moduleContext, type.MULTI_COUPONS);\n            },\n\n            save: function (coupons, moduleId) {\n                var self = this;\n\n                if (self.moduleContext.moduleId === moduleId) {\n                    var args = {\n                        pageId: Number(params.pageid),\n                        moduleId: moduleId,\n                        refType: type.MULTI_COUPONS,\n                        refIds: utils.map(coupons, function (el) {\n                            return el.refId\n                        }).join(',')\n                    };\n\n                    if (self.displayType != 2) {\n                        args.isShowCategory = self.displayType;\n                    }\n                    //0是上传图片组件，1是设置链接组件，2是券表格组件\n                    self.$children[2].run();\n                    self.$http.post(host + '/cmsModuleDataWrite/saveRefIds.do', args).then(function (resp) {\n                        if (resp.data.code == 0) {\n                            self.$children[2].readSource();\n                        } else {\n                            msgAlert(resp.data.message);\n                            return false;\n                        }\n                    });\n                }\n            },\n\n            batchRemove: function () {\n                var self = this;\n\n                if (self.checkedList.length > 0) {\n                    rmAlert(function () {\n                        self.$http.post(host + '/cmsModuleDataWrite/delModuleRef.do', utils.map(self.checkedList, function (el) {\n                            return {\n                                refId: el.refId,\n                                cmsModuleId: self.moduleContext.moduleId,\n                                refType: type.MULTI_COUPONS\n                            }\n                        })).then(function (resp) {\n                            if (resp.data.code == 0) {\n                                self.checkedList.length = 0;\n                                self.$children[2].readSource();\n                            } else {\n                                msgAlert(resp.data.message);\n                            }\n                        });\n                    });\n                } else {\n                    msgAlert('请选择要删除的活动');\n                    return false;\n                }\n            },\n\n            remove: function (item) {\n                var self = this;\n\n                rmAlert(function () {\n                    self.$http.post(host + '/cmsModuleDataWrite/delModuleRef.do', [{\n                        refType: type.MULTI_COUPONS,\n                        cmsModuleId: self.moduleContext.moduleId,\n                        refId: item.refId,\n                    }]).then(function (resp) {\n                        if (resp.data.code == 0) {\n                            self.checkedList.length = 0;\n                            self.$children[2].readSource();\n                        } else {\n                            msgAlert(resp.data.message);\n                        }\n                    });\n                });\n            },\n            showError: function () {\n                this.$v.vars.$touch();\n                this.moduleContext._error = this.$v.$invalid;\n            },\n        },\n        mounted: function () {\n            this.showError();\n            msgBus.$on('show-error-msg', self.showError);\n            msgBus.$on('coupon-selected', this.save);\n        },\n        beforeDestroy: function () {\n            msgBus.$off('coupon-selected', this.save);\n        }\n    }\n}\n//# sourceURL=multi-coupons.bk.js",
        "clientDialect": "vue",
        "editorDialect": "vue",
        "isLazy": 0,
        "isFrozen": 0,
        "renderType": null,
        "canDel": 1,
        "variables": "%7B%22hideTitle%22%3Afalse%2C%22title%22%3A%22%22%2C%22icon%22%3A%22%22%2C%22link%22%3A%7B%7D%2C%22displayType%22%3A%22r1c1%22%2C%22linkTitle%22%3A%22%E6%9B%B4%E5%A4%9A%22%7D",
        "groupType": 3,
        "previewImg": "http://cdn.oudianyun.com/lyf-local/trunk/back-cms/1492083575038_8582_75.jpg@base@tag=imgScale&q=80",
        "companyId": null,
        "front": false
    }, {
        "templateId": 3464,
        "name": "拼团",
        "templateCode": "pintuan",
        "templateVer": "v1",
        "css": null,
        "html": "<div class=\"pintuan-bk-v1\">\n    <div class=\"line line-dashed b-b line-lg\"></div>\n    <div class=\"form-group\">\n        <label class=\"col-sm-3 control-label\">商品展示数</label>\n        <div class=\"col-sm-8\">\n            <input type=\"number\" class=\"form-control\" v-model.number=\"vars.displayNum\">\n        </div>\n    </div>\n    <div class=\"line line-dashed b-b line-lg\"></div>\n    <div class=\"form-group\">\n        <label class=\"col-sm-3 control-label\">显示样式</label>\n        <div class=\"col-sm-9\">\n            <div class=\"radio-inline pdl0\">\n                <label class=\"i-checks\">\n                    <input type=\"radio\" name=\"display-type\" value=\"0\" v-model=\"vars.displayType\">\n                    <i></i>\n                    单行单列\n                </label>\n            </div>\n            <div class=\"radio-inline pdl0\">\n                <label class=\"i-checks\">\n                    <input type=\"radio\" name=\"display-type\" value=\"1\" v-model=\"vars.displayType\">\n                    <i></i>\n                    单行双列\n                </label>\n            </div>\n            <div class=\"radio-inline pdl0\">\n                <label class=\"i-checks\">\n                    <input type=\"radio\" name=\"display-type\" value=\"2\" v-model=\"vars.displayType\">\n                    <i></i>\n                    单行多列\n                </label>\n            </div>\n        </div>\n    </div>\n    <div class=\"line line-dashed b-b line-lg\"></div>\n    <div class=\"form-group\">\n        <label class=\"col-sm-3 control-label\">\n            商品排序规则\n        </label>\n        <div class=\"col-sm-8\">\n            <select class=\"form-control form-control-sm\" v-model=\"sortRule\" @change=\"autoSort(sortRule)\">\n                <option v-for=\"selection in sortSelections\" :value=\"selection.id\">{{selection.title}}</option>\n            </select>\n        </div>\n    </div>\n    <div class=\"line line-dashed b-b line-lg\"></div>\n    <div class=\"form-group\">\n        <label class=\"col-sm-3 control-label\">选品池</label>\n        <div class=\"col-sm-9\">\n            <a class=\"btn btn-info\" @click=\"addTuans\">选择拼团活动</a>\n        </div>\n    </div>\n    <div class=\"pintuan-table\">\n        <div class=\"form-group\">\n            <div class=\"col-sm-8\">\n                <a class=\"btn btn-info\" @click=\"removeGoods\">批量删除</a>\n            </div>\n        </div>\n        <div class=\"col-sm-12\">\n            <grids-table :query-adaptor=\"refreshGoodsList\" _key=\"refId\" auto-read>\n                <template scope=\"item\" slot=\"body\">\n                    <grid-column :scope=\"item\" _checkbox _ref=\"checked\" :checked-list=\"removingList\"></grid-column>\n                    <grid-column :scope=\"item\" header=\"拼团活动\" _ref=\"refTitle\"\n                                 :style=\"{'max-width':'100px'}\"></grid-column>\n                    <grid-column :scope=\"item\" header=\"商品编码\" _ref=\"mpCode\" :style=\"{'max-width':'100px'}\"></grid-column>\n                    <grid-column :scope=\"item\" header=\"商品名称\" _ref=\"mpName\" :style=\"{'max-width':'100px'}\"></grid-column>\n                    <grid-column :scope=\"item\" header=\"优先级\">\n                        <grid-act-input :scope=\"item\" _number _ref=\"sortVal\" @change=\"resort\"></grid-act-input>\n                    </grid-column>\n                    <grid-column :scope=\"item\" header=\"操作\">\n                        <grid-act-click :scope=\"item\" label=\"删除\" @click=\"removeItem\"\n                                        clazz=\"btn-danger\"></grid-act-click>\n                    </grid-column>\n                </template>\n                <template scope=\"info\" slot=\"foot\">\n                    <grid-pagination :scope=\"info\" slot=\"foot\"></grid-pagination>\n                </template>\n            </grids-table>\n        </div>\n    </div>\n</div>",
        "js": "/**\n * Created by Jaron on 2/21/2017.\n */\nfunction initialize(template) {\n    var host = appRender.host,\n        utils = appRender.utils,\n        msgBus = appRender.msgBus,\n        params = utils.urlParams();\n\n    function msgAlert(msg) {\n        msgBus.$emit('modal-open', {\n            title: '信息提示',\n            message: msg,\n            action: [{\n                clazz: {'btn-info': true},\n                name: '确定',\n                callback: function (close) {\n                    close();\n                }\n            }]\n        });\n    }\n\n    function rmAlert(func) {\n        msgBus.$emit('modal-open', {\n            title: '温馨提示',\n            message: '确定要删除该活动么?',\n            action: [{\n                clazz: {'btn-info': true},\n                name: '取消',\n                callback: function (close) {\n                    close();\n                }\n            }, {\n                clazz: {'btn-info': true},\n                name: '确定',\n                callback: function (close) {\n                    func();\n                    close();\n                }\n            }]\n        });\n    }\n\n    return {\n        template: template,\n        props: ['moduleContext'],\n        data: function () {\n            // {displayNum, displayType, displayNav}\n            var vars = this.moduleContext.variables();\n            return {\n                vars: vars,\n                removingList: [],\n                sortRule: null,\n                sortSelections: []\n            }\n        },\n        methods: {\n            refreshTemplate: function (goodsList, categoryList) {\n                this.moduleContext.goodsList({\n                    moduleDataList: goodsList,\n                    categoryList: categoryList || []\n                });\n            },\n\n            refreshGoodsList: function (pagination) {\n                var self = this;\n                return self.$http.get(host + '/cmsModuleDataRead/queryCmsModuleRefList.do', {\n                    params: {\n                        moduleId: self.moduleContext.moduleId,\n                        pageNo: pagination.current,\n                        pageSize: pagination.step\n                    }\n                }).then(function (resp) {\n                    if (resp.data.code == 0) {\n                        resp = resp.data.data;\n\n                        if (resp.obj == null) {\n                            self.refreshTemplate([], []);\n                            return {\n                                listObj: null,\n                                total: 0\n                            }\n                        } else {\n                            var goodsList = resp.obj.refDataList;\n\n                            self.$http.get(host + '/cmsModuleDataRead/queryProductCategory.do', {\n                                params: {moduleId: self.moduleContext.moduleId}\n                            }).then(function (resp) {\n                                if (resp.data.code == 0) {\n                                    var categoryList = resp.data.data;\n                                    self.refreshTemplate(goodsList, categoryList);\n                                } else {\n                                    msgAlert(resp.data.message);\n                                }\n                            });\n                            return {\n                                listObj: goodsList,\n                                total: resp.total\n                            };\n                        }\n                    } else {\n                        msgAlert(resp.data.message);\n                    }\n                })\n            },\n\n            refreshTypeList: function () {\n                var self = this;\n                return self.$http.get(host + '/cmsModuleDataRead/queryModuleSortRole.do', {\n                    params: {\n                        moduleId: self.moduleContext.moduleId\n                    }\n                }).then(function (resp) {\n                    if (resp.data.code == 0) {\n                        resp = resp.data.data;\n                        self.sortSelections = resp.sortRole;\n                        self.sortRule = resp.curSortRole || 0\n                    } else {\n                        msgAlert(resp.data.message);\n                    }\n                })\n            },\n\n            autoSort: function (rule) {\n                var self = this;\n                self.$http.get(host + '/cmsModuleDataWrite/changeModuleSortRole.do', {\n                    params: {\n                        moduleId: self.moduleContext.moduleId,\n                        sortRole: rule\n                    }\n                }).then(function (resp) {\n                    if (resp.data.code == 0 && resp.data.data == true) {\n                        // Prevent the delay of data sync.\n                        self.$children[0].run();\n                        setTimeout(function(){\n                            self.$children[0].readSource();\n                        }, 2000);\n                    } else {\n                        msgAlert(resp.data.message);\n                    }\n                })\n            },\n\n            resort: function (item, value) {\n                var self = this;\n                self.$http.post(host + '/cmsModuleDataWrite/updateModuleDataSort.do', {\n                    id: Number(item.id),\n                    currentSort: Number(item.sortVal),\n                    sort: Number(value)\n                }).then(function (resp) {\n                    if (resp.data.code == 0 && resp.data.data == true) {\n                        msgAlert('修改成功');\n                        self.$children[0].readSource();\n                    } else {\n                        msgAlert(resp.data.message);\n                    }\n                });\n            },\n\n            addTuans: function () {\n                msgBus.$emit('tuan-searching', this.moduleContext, 3);\n            },\n\n            saveTuan: function (tuans, moduleId) {\n                var self = this;\n\n                if (self.moduleContext.moduleId === moduleId) {\n                    var args = {\n                        pageId: Number(params.pageid),\n                        moduleId: moduleId,\n                        refType: 3,\n                        productNums: self.vars.displayNum,\n                        refIds: utils.map(tuans, function (el) {\n                            return el.id\n                        }).join(',')\n                    };\n\n                    if (self.displayType != 2) {\n                        args.isShowCategory = self.displayType;\n                    }\n                    self.$children[0].run();\n                    self.$http.post(host + '/cmsModuleDataWrite/saveRefIds.do', args).then(function (resp) {\n                        if (resp.data.code == 0) {\n                            self.$children[0].readSource();\n                        } else {\n                            msgAlert(resp.data.message);\n                            return false;\n                        }\n                    });\n                }\n            },\n\n            removeGoods: function () {\n                var self = this;\n\n                if (self.removingList.length > 0) {\n                    rmAlert(function () {\n                        self.$http.post(host + '/cmsModuleDataWrite/deleteByMpId.do', {\n                            pageId: params.pageid,\n                            moduleId: self.moduleContext.moduleId,\n                            mpIds: utils.map(self.removingList, function (el) {\n                                return el.mpId;\n                            })\n                        }, {\n                            emulateJSON: true\n                        }).then(function (resp) {\n                            if (resp.data.code == 0) {\n                                self.removingList.length = 0;\n                                self.$children[0].readSource();\n                            } else {\n                                msgAlert(resp.data.message);\n                            }\n                        });\n                    });\n                } else {\n                    msgAlert('请选择要删除的商品');\n                    return false;\n                }\n            },\n\n            removeItem: function (item) {\n                var self = this;\n\n                rmAlert(function () {\n                    self.$http.post(host + '/cmsModuleDataWrite/deleteByMpId.do', {\n                        pageId: params.pageid,\n                        moduleId: self.moduleContext.moduleId,\n                        mpIds: [item.mpId]\n                    }, {\n                        emulateJSON: true\n                    }).then(function (resp) {\n                        if (resp.data.code == 0) {\n                            self.removingList.length = 0;\n                            self.$children[0].readSource();\n                        } else {\n                            msgAlert(resp.data.message);\n                        }\n                    });\n                });\n            }\n        },\n        mounted: function () {\n            this.refreshTypeList();\n            msgBus.$on('tuan-selected', this.saveTuan);\n        },\n        beforeDestroy: function () {\n            msgBus.$off('tuan-selected', this.saveTuan);\n        }\n    }\n}\n//# sourceURL=pintuan.bk.js",
        "clientDialect": "vue",
        "editorDialect": "vue",
        "isLazy": 0,
        "isFrozen": 0,
        "renderType": null,
        "canDel": 1,
        "variables": "%7B%22displayNum%22%3A100%2C%22displayType%22%3A0%2C%22displayNav%22%3A0%7D\t",
        "groupType": 3,
        "previewImg": "http://cdn.oudianyun.com/lyf-local/trunk/back-cms/1495682222974_332_57.jpg@base@tag=imgScale&q=80",
        "companyId": null,
        "front": false
    }, {
        "templateId": 3465,
        "name": "砍价",
        "templateCode": "cut-price",
        "templateVer": "v1",
        "css": null,
        "html": "<div class=\"pintuan-bk-v1\">\n    <div class=\"line line-dashed b-b line-lg\"></div>\n    <div class=\"form-group\">\n        <label class=\"col-sm-3 control-label\">商品展示数</label>\n        <div class=\"col-sm-8\">\n            <input type=\"number\" class=\"form-control\" v-model.number=\"vars.displayNum\">\n        </div>\n    </div>\n    <div class=\"line line-dashed b-b line-lg\"></div>\n    <div class=\"form-group\">\n        <label class=\"col-sm-3 control-label\">显示样式</label>\n        <div class=\"col-sm-9\">\n            <div class=\"radio-inline pdl0\">\n                <label class=\"i-checks\">\n                    <input type=\"radio\" name=\"display-type\" value=\"0\" v-model=\"vars.displayType\">\n                    <i></i>\n                    单行单列\n                </label>\n            </div>\n            <div class=\"radio-inline pdl0\">\n                <label class=\"i-checks\">\n                    <input type=\"radio\" name=\"display-type\" value=\"1\" v-model=\"vars.displayType\">\n                    <i></i>\n                    单行双列\n                </label>\n            </div>\n            <div class=\"radio-inline pdl0\">\n                <label class=\"i-checks\">\n                    <input type=\"radio\" name=\"display-type\" value=\"2\" v-model=\"vars.displayType\">\n                    <i></i>\n                    单行多列\n                </label>\n            </div>\n        </div>\n    </div>\n    <div class=\"line line-dashed b-b line-lg\"></div>\n    <div class=\"form-group\">\n        <label class=\"col-sm-3 control-label\">\n            商品排序规则\n        </label>\n        <div class=\"col-sm-8\">\n            <select class=\"form-control form-control-sm\" v-model=\"sortRule\" @change=\"autoSort(sortRule)\">\n                <option v-for=\"selection in sortSelections\" :value=\"selection.id\">{{selection.title}}</option>\n            </select>\n        </div>\n    </div>\n    <div class=\"line line-dashed b-b line-lg\"></div>\n    <div class=\"form-group\">\n        <label class=\"col-sm-3 control-label\">选品池</label>\n        <div class=\"col-sm-9\">\n            <a class=\"btn btn-info\" @click=\"add\">选择砍价活动</a>\n        </div>\n    </div>\n    <div class=\"line line-dashed b-b line-lg\"></div>\n    <div class=\"form-group\">\n        <div class=\"col-sm-8 col-sm-offset-2\">\n             <table class=\"table table-bordered\">\n                <tbody>\n                    <tr>\n                        <td class=\"col-sm-3\">活动ID</td>\n                        <td>{{promotion.cutPriceId}}</td>\n                    </tr>\n                    <tr>\n                        <td class=\"col-sm-3\">活动时间</td>\n                        <td>{{duration}}</td>\n                    </tr>\n                    <tr>\n                        <td class=\"col-sm-3\">砍价方式</td>\n                        <td>{{promotion.type | cutFilter('type')}}</td>\n                    </tr>\n                    <tr>\n                        <td class=\"col-sm-3\">活动对象</td>\n                        <td>{{promotion.activeObject | cutFilter('activeObject')}}</td>\n                    </tr>\n                </tbody>\n            </table>\n        </div>\n    </div>\n   \n    <div class=\"line line-dashed b-b line-lg\"></div>\n    <div class=\"pintuan-table\">\n        <div class=\"form-group\">\n            <div class=\"col-sm-8\">\n                <a class=\"btn btn-info\" @click=\"batchRemove\">批量删除</a>\n            </div>\n        </div>\n        <div class=\"col-sm-12\">\n            <grids-table :query-adaptor=\"refreshGoodsList\" _key=\"mpId\" auto-read>\n                <template scope=\"item\" slot=\"body\">\n                    <grid-column :scope=\"item\" _checkbox _ref=\"checked\" :checked-list=\"removingList\"></grid-column>\n                    <grid-column :scope=\"item\" header=\"商品名称\" _ref=\"mpName\"\n                                 :style=\"{'max-width':'100px'}\"></grid-column>\n                    <grid-column :scope=\"item\" header=\"商品编码\" _ref=\"mpCode\" :style=\"{'max-width':'100px'}\"></grid-column>\n                    <grid-column :scope=\"item\" header=\"商品名称\" _ref=\"mpName\" :style=\"{'max-width':'100px'}\"></grid-column>\n                    <grid-column :scope=\"item\" header=\"优先级\">\n                        <grid-act-input :scope=\"item\" _number _ref=\"sortVal\" @change=\"resort\"></grid-act-input>\n                    </grid-column>\n                    <grid-column :scope=\"item\" header=\"操作\">\n                        <grid-act-click :scope=\"item\" label=\"删除\" @click=\"remove\"\n                                        clazz=\"btn-danger\"></grid-act-click>\n                    </grid-column>\n                </template>\n                <template scope=\"info\" slot=\"foot\">\n                    <grid-pagination :scope=\"info\" slot=\"foot\"></grid-pagination>\n                </template>\n            </grids-table>\n        </div>\n    </div>\n</div>",
        "js": "/**\n * Created by Jaron on 2/21/2017.\n */\nfunction initialize(template) {\n    var host = appRender.host,\n        utils = appRender.utils,\n        msgBus = appRender.msgBus,\n        params = utils.urlParams();\n\n    function msgAlert(msg) {\n        msgBus.$emit('modal-open', {\n            title: '信息提示',\n            message: msg,\n            action: [{\n                clazz: {\n                    'btn-info': true\n                },\n                name: '确定',\n                callback: function (close) {\n                    close();\n                }\n            }]\n        });\n    }\n\n    function rmAlert(func) {\n        msgBus.$emit('modal-open', {\n            title: '温馨提示',\n            message: '确定要删除该活动么?',\n            action: [{\n                clazz: {\n                    'btn-info': true\n                },\n                name: '取消',\n                callback: function (close) {\n                    close();\n                }\n            }, {\n                clazz: {\n                    'btn-info': true\n                },\n                name: '确定',\n                callback: function (close) {\n                    func();\n                    close();\n                }\n            }]\n        });\n    }\n\n    return {\n        template: template,\n        props: ['moduleContext'],\n        data: function () {\n            // {displayNum, displayType, displayNav}\n            var vars = this.moduleContext.variables();\n            return {\n                removingList:[],\n                vars: vars,\n                check: [],\n                sortRule: null,\n                sortSelections: [],\n                promotion: {}\n            }\n        },\n        computed: {\n            duration: function () {\n                var format = 'YYYY.MM.DD HH:mm:ss';\n                if (!appRender.utils.isEmpty(this.promotion)) {\n                    return moment(this.promotion.startTime).format(format) + ' -- ' + moment(this.promotion.endTime).format(format);\n                } else {\n                    return '';\n                }\n            }\n        },\n        filters: {\n            cutFilter: function (value,tp) {\n                var cutFilter = {\n                    type:['固定金额','随机金额','限制次数'],\n                    activeObject:['','新用户','老用户','不限制']\n                }\n                if(value && value.length>0){\n                    return _.map(value,function(val,key){\n                        return cutFilter[tp][val]\n                    }).join(' ');\n                }else{\n                    return cutFilter[tp][value];\n                }\n            }\n        },\n        methods: {\n            refreshTemplate: function (goodsList, categoryList) {\n                this.moduleContext.goodsList({\n                    moduleDataList: goodsList,\n                    categoryList: categoryList || []\n                });\n            },\n\n            refreshGoodsList: function (pagination) {\n                var self = this;\n                self.$http.get(host + '/cmsModuleRead/queryModuleCutPrice.do', {\n                    params: {\n                        moduleId: self.moduleContext.moduleId\n                    }\n                }).then(function (resp) {\n                    if (resp.data.code == 0) {\n                        var promotionInfo = resp.data.data;\n\n                        if (promotionInfo && promotionInfo.length > 0) {\n                            self.promotion = promotionInfo[0];\n                        }\n                    } else {\n                        msgAlert(resp.data.message);\n                    }\n                });\n                return self.$http.get(host + '/cmsModuleDataRead/queryCmsModuleRefList.do', {\n                    params: {\n                        moduleId: self.moduleContext.moduleId,\n                        pageNo: pagination.current,\n                        pageSize: pagination.step\n                    }\n                }).then(function (resp) {\n                    if (resp.data.code == 0) {\n                        resp = resp.data.data;\n                        if (resp.obj == null) {\n                            self.refreshTemplate([], []);\n                            return {\n                                listObj: null,\n                                total: 0\n                            }\n                        } else {\n                            var goodsList = resp.obj.refDataList;\n\n                            self.$http.get(host + '/cmsModuleDataRead/queryProductCategory.do', {\n                                params: {\n                                    moduleId: self.moduleContext.moduleId\n                                }\n                            }).then(function (resp) {\n                                if (resp.data.code == 0) {\n                                    var categoryList = resp.data.data;\n                                    self.refreshTemplate(goodsList, categoryList);\n                                } else {\n                                    msgAlert(resp.data.message);\n                                }\n                            });\n                            return {\n                                listObj: goodsList,\n                                total: resp.total\n                            };\n                        }\n                    } else {\n                        msgAlert(resp.data.message);\n                    }\n                })\n            },\n\n            refreshTypeList: function () {\n                var self = this;\n                return self.$http.get(host + '/cmsModuleDataRead/queryModuleSortRole.do', {\n                    params: {\n                        moduleId: self.moduleContext.moduleId\n                    }\n                }).then(function (resp) {\n                    if (resp.data.code == 0) {\n                        resp = resp.data.data;\n                        self.sortSelections = resp.sortRole;\n                        self.sortRule = resp.curSortRole || 0\n                    } else {\n                        msgAlert(resp.data.message);\n                    }\n                })\n            },\n\n            autoSort: function (rule) {\n                var self = this;\n                self.$http.get(host + '/cmsModuleDataWrite/changeModuleSortRole.do', {\n                    params: {\n                        moduleId: self.moduleContext.moduleId,\n                        sortRole: rule\n                    }\n                }).then(function (resp) {\n                    if (resp.data.code == 0 && resp.data.data == true) {\n                        // Prevent the delay of data sync.\n                        self.$children[0].run();\n                        setTimeout(function () {\n                            self.$children[0].readSource();\n                        }, 2000);\n                    } else {\n                        msgAlert(resp.data.message);\n                    }\n                })\n            },\n\n            resort: function (item, value) {\n                var self = this;\n                self.$http.post(host + '/cmsModuleDataWrite/updateModuleDataSort.do', {\n                    id: Number(item.id),\n                    currentSort: Number(item.sortVal),\n                    sort: Number(value)\n                }).then(function (resp) {\n                    if (resp.data.code == 0 && resp.data.data == true) {\n                        msgAlert('修改成功');\n                        self.$children[0].readSource();\n                    } else {\n                        msgAlert(resp.data.message);\n                    }\n                });\n            },\n\n            add: function () {\n                msgBus.$emit('cut-searching', this.moduleContext, 14);\n            },\n\n            save: function (pro, moduleId) {\n                var self = this;\n                if (self.moduleContext.moduleId === moduleId) {\n                    var args = {\n                        cutPriceId: pro[0].cutPriceId,\n                        pageId: Number(params.pageid),\n                        moduleId: moduleId,\n                        productNums: self.vars.displayNum,\n                        isShowCategory:self.vars.displayNav\n                    };\n                    self.$children[0].run();\n                    self.$http.post(host + '/cmsModuleDataWrite/saveCutPrice.do', args,{ emulateJSON: true }).then(function (resp) {\n                        if (resp.data.code == 0) {\n                            self.$children[0].readSource();\n                        } else {\n                            msgAlert(resp.data.message);\n                            return false;\n                        }\n                    });\n                }\n            },\n\n            batchRemove: function () {\n                var self = this;\n\n                if (self.removingList.length > 0) {\n                    rmAlert(function () {\n                        self.$http.post(host + '/cmsModuleDataWrite/deleteByMpId.do', {\n                            pageId: params.pageid,\n                            moduleId: self.moduleContext.moduleId,\n                            mpIds: utils.map(self.removingList, function (el) {\n                                return el.mpId;\n                            })\n                        }, {\n                            emulateJSON: true\n                        }).then(function (resp) {\n                            if (resp.data.code == 0) {\n                                self.removingList.length = 0;\n                                self.$children[0].readSource();\n                            } else {\n                                msgAlert(resp.data.message);\n                            }\n                        });\n                    });\n                } else {\n                    msgAlert('请选择要删除的商品');\n                    return false;\n                }\n            },\n\n            remove: function (item) {\n                var self = this;\n\n                rmAlert(function () {\n                    self.$http.post(host + '/cmsModuleDataWrite/deleteByMpId.do', {\n                        pageId: params.pageid,\n                        moduleId: self.moduleContext.moduleId,\n                        mpIds: [item.mpId]\n                    }, {\n                        emulateJSON: true\n                    }).then(function (resp) {\n                        if (resp.data.code == 0) {\n                            self.removingList.length = 0;\n                            self.$children[0].readSource();\n                        } else {\n                            msgAlert(resp.data.message);\n                        }\n                    });\n                });\n            }\n        },\n        mounted: function () {\n            this.refreshTypeList();\n            msgBus.$on('cut-selected', this.save);\n        },\n        beforeDestroy: function () {\n            msgBus.$off('cut-selected', this.save);\n        }\n    }\n}\n//# sourceURL=cut-price.bk.js",
        "clientDialect": "vue",
        "editorDialect": "vue",
        "isLazy": 0,
        "isFrozen": 0,
        "renderType": null,
        "canDel": 1,
        "variables": "%7B%22displayNum%22%3A100%2C%22displayType%22%3A0%2C%22displayNav%22%3A0%7D\t",
        "groupType": 3,
        "previewImg": "http://cdn.oudianyun.com/lyf-local/trunk/back-cms/1495682222974_332_57.jpg@base@tag=imgScale&q=80",
        "companyId": null,
        "front": false
    }, {
        "templateId": 379047000002010,
        "name": "魔方",
        "templateCode": "cube",
        "templateVer": "v1",
        "css": ".h5-metro-editor-v1 .pdl0 {\n  padding-left: 0; }\n\n.h5-metro-editor-v1 label {\n  font-weight: 100 !important; }\n\n.h5-metro-editor-v1 .metro-selector {\n  position: relative;\n  width: 100%;\n  height: auto;\n  margin-bottom: 15px; }\n\n.h5-metro-editor-v1 input[name=\"metro-type\"] {\n  -webkit-appearance: none;\n  -moz-appearance: none;\n  appearance: none;\n  outline: 0;\n  opacity: 0;\n  width: 100%;\n  height: 100%;\n  font-size: 100px;\n  position: absolute;\n  top: 0; }\n\n.h5-metro-editor-v1 .cube-list:before {\n  display: block;\n  content: ' ';\n  width: 100px;\n  height: 60px;\n  cursor: pointer; }\n\n.h5-metro-editor-v1 .cube-list {\n  background-position: center center;\n  background-repeat: no-repeat;\n  display: block;\n  width: 120px;\n  margin: 0 12px;\n  float: left;\n  position: relative; }\n\n.h5-metro-editor-v1 .cube-list[data-value=\"0\"] {\n  background-image: url(http://cdn.oudianyun.com/lyf-local/trunk/back-cms/1490759025558_4463_78.jpg@base@tag=imgScale&q=80); }\n\n.h5-metro-editor-v1 .cube-list[data-value=\"0\"].metro-active {\n  background-image: url(http://cdn.oudianyun.com/lyf-local/trunk/back-cms/1490759054886_2812_34.jpg@base@tag=imgScale&q=80); }\n\n.h5-metro-editor-v1 .cube-list[data-value=\"1\"] {\n  background-image: url(http://cdn.oudianyun.com/lyf-local/trunk/back-cms/1490759073339_950_63.jpg@base@tag=imgScale&q=80); }\n\n.h5-metro-editor-v1 .cube-list[data-value=\"1\"].metro-active {\n  background-image: url(http://cdn.oudianyun.com/lyf-local/trunk/back-cms/1490759091518_4561_29.jpg@base@tag=imgScale&q=80); }\n\n.h5-metro-editor-v1 .cube-list[data-value=\"2\"] {\n  background-image: url(http://cdn.oudianyun.com/lyf-local/trunk/back-cms/1490759113586_191_56.jpg@base@tag=imgScale&q=80); }\n\n.h5-metro-editor-v1 .cube-list[data-value=\"2\"].metro-active {\n  background-image: url(http://cdn.oudianyun.com/lyf-local/trunk/back-cms/1490759133210_482_64.jpg@base@tag=imgScale&q=80); }\n\n.h5-metro-editor-v1 .cube-list[data-value=\"3\"] {\n  background-image: url(http://cdn.oudianyun.com/lyf-local/trunk/back-cms/1490759245010_8282_61.jpg@base@tag=imgScale&q=80); }\n\n.h5-metro-editor-v1 .cube-list[data-value=\"3\"].metro-active {\n  background-image: url(http://cdn.oudianyun.com/lyf-local/trunk/back-cms/1490759260402_4853_65.jpg@base@tag=imgScale&q=80); }\n\n.h5-metro-editor-v1 .cube-list[data-value=\"4\"] {\n  background-image: url(http://cdn.oudianyun.com/lyf-local/trunk/back-cms/1490759276244_6346_66.jpg@base@tag=imgScale&q=80); }\n\n.h5-metro-editor-v1 .cube-list[data-value=\"4\"].metro-active {\n  background-image: url(http://cdn.oudianyun.com/lyf-local/trunk/back-cms/1490759298759_4578_68.jpg@base@tag=imgScale&q=80); }\n\n.h5-metro-editor-v1 .cube-list[data-value=\"5\"] {\n  background-image: url(http://cdn.oudianyun.com/lyf-local/trunk/back-cms/1490759317959_7209_78.jpg@base@tag=imgScale&q=80); }\n\n.h5-metro-editor-v1 .cube-list[data-value=\"5\"].metro-active {\n  background-image: url(http://cdn.oudianyun.com/lyf-local/trunk/back-cms/1490759334593_3705_34.jpg@base@tag=imgScale&q=80); }\n\n.h5-metro-editor-v1 .cube-list[data-value=\"6\"] {\n  background-image: url(http://cdn.oudianyun.com/lyf-local/trunk/back-cms/1490759461976_409_63.jpg@base@tag=imgScale&q=80); }\n\n.h5-metro-editor-v1 .cube-list[data-value=\"6\"].metro-active {\n  background-image: url(http://cdn.oudianyun.com/lyf-local/trunk/back-cms/1490759483822_8377_29.jpg@base@tag=imgScale&q=80); }\n\n.h5-metro-editor-v1 .cube-list[data-value=\"7\"] {\n  background-image: url(http://cdn.oudianyun.com/lyf-local/trunk/back-cms/1490759498670_3448_56.jpg@base@tag=imgScale&q=80); }\n\n.h5-metro-editor-v1 .cube-list[data-value=\"7\"].metro-active {\n  background-image: url(http://cdn.oudianyun.com/lyf-local/trunk/back-cms/1490759516380_407_64.jpg@base@tag=imgScale&q=80); }\n\n.h5-metro-editor-v1 .cube-list[data-value=\"8\"] {\n  background-image: url(http://cdn.oudianyun.com/lyf-local/trunk/back-cms/1490759537563_3398_61.jpg@base@tag=imgScale&q=80); }\n\n.h5-metro-editor-v1 .cube-list[data-value=\"8\"].metro-active {\n  background-image: url(http://cdn.oudianyun.com/lyf-local/trunk/back-cms/1490759556525_3738_65.jpg@base@tag=imgScale&q=80); }\n\n.h5-metro-editor-v1 .cube-list[data-value=\"9\"] {\n  background-image: url(http://cdn.oudianyun.com/lyf-local/trunk/back-cms/1490759571413_7498_66.jpg@base@tag=imgScale&q=80); }\n\n.h5-metro-editor-v1 .cube-list[data-value=\"9\"].metro-active {\n  background-image: url(http://cdn.oudianyun.com/lyf-local/trunk/back-cms/1490759588913_5761_68.jpg@base@tag=imgScale&q=80); }\n\n.h5-metro-editor-v1 .cube-list[data-value=\"10\"] {\n  background-image: url(http://cdn.oudianyun.com/lyf-local/trunk/back-cms/1490759604618_8584_78.jpg@base@tag=imgScale&q=80); }\n\n.h5-metro-editor-v1 .cube-list[data-value=\"10\"].metro-active {\n  background-image: url(http://cdn.oudianyun.com/lyf-local/trunk/back-cms/1490759656445_7073_34.jpg@base@tag=imgScale&q=80); }\n\n.h5-metro-editor-v1 .b-b {\n  border-bottom: 1px solid #dee5e7; }\n\n.h5-metro-editor-v1 .line-lg {\n  margin-top: 15px;\n  margin-bottom: 15px; }\n\n.h5-metro-editor-v1 .line {\n  width: 100%;\n  height: 2px;\n  margin: 10px 0;\n  font-size: 0;\n  overflow: hidden; }\n\n.h5-metro-editor-v1 .size {\n  width: 102px !important;\n  height: 100px; }\n\n.h5-metro-editor-v1 .solidBorder {\n  border: 1px solid #c0c0c0;\n  border-radius: 5px; }\n\n.h5-metro-editor-v1 .blue {\n  color: #0066cc; }\n\n.h5-metro-editor-v1 .mgt-7px {\n  margin-top: -7px; }\n\n.h5-metro-editor-v1 .mgt52px {\n  margin-top: 52px; }\n\n.h5-metro-editor-v1 .btn-info {\n  color: #fff !important;\n  background-color: #23b7e5;\n  border-color: #23b7e5; }\n\n.h5-metro-editor-v1 .link-txt {\n  max-width: 140px;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  background-color: #468847;\n  color: #fff;\n  padding: 0 8px;\n  border-radius: 5px;\n  margin-left: 20px; }\n\n.h5-metro-editor-v1 .link-container > div {\n  float: left; }\n\n.h5-metro-editor-v1 .link-container .link-set:hover {\n  text-decoration: underline;\n  cursor: pointer; }\n\n.h5-metro-editor-v1 .link-container .link-set {\n  margin-left: 20px;\n  color: dodgerblue; }\n\n.h5-metro-editor-v1 .cms-pic {\n  display: block;\n  position: relative;\n  width: 110px;\n  height: 110px;\n  float: right;\n  border: solid 1px #ddd;\n  background-repeat: no-repeat;\n  background-position: center center;\n  background-size: 100% 100%; }\n  .h5-metro-editor-v1 .cms-pic div {\n    width: 100%;\n    height: 100%; }\n\n.h5-metro-editor-v1 .cms-pic .prev-img {\n  width: 100%;\n  height: 100%; }\n\n.h5-metro-editor-v1 .cms-pic .re-upload {\n  display: inline-block;\n  padding: 5px;\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  width: 100%;\n  text-align: center;\n  background-color: #ddd;\n  color: #fff;\n  opacity: 0.9; }\n\n.h5-metro-editor-v1 .cms-pic .re-upload:hover {\n  opacity: 1.0; }\n\n.h5-metro-editor-v1 .cms-pic .no-img {\n  padding: 25px 10px; }\n\n.h5-metro-editor-v1 .link-wrapper {\n  margin-top: 70px !important; }",
        "html": "<div class=\"h5-metro-editor-v1\" v-cloak>\n    <div class=\"form-horizontal\">\n        <div class=\"metro-selector clearfix\">\n            <template v-for=\"(val,index) in mode\">\n                <a class=\"cube-list\" href=\"javascript:void(0)\" :class=\"{'metro-active':index==metroIndex}\" :data-value=\"index\">\n                    <input type=\"radio\" name=\"metro-type\" :value=\"index\" v-model=\"metroIndex\">\n                </a>\n            </template>\n        </div>\n        <div class=\"metro-list\">\n            <template v-for=\"item in metroItems\">\n                <div class=\"line line-dashed b-b line-lg\"></div>\n                <div class=\"form-group\">\n                    <div class=\"col-sm-3\">\n                        <a class=\"cms-pic\" href=\"javascript:void(0)\" :data-metro-idx=\"item.index\">\n                            <div v-if=\"item.imgUrl\">\n                                <img class=\"prev-img\" :src=\"item.imgUrl\" :alt=\"item.imgName\">\n                                <a class=\"re-upload\" href=\"javascript:void(0)\">重新上传</a>\n                            </div>\n                            <div class=\"no-img\" v-if=\"!item.imgUrl\">\n                                <p class=\"text-center\"><i class=\"glyphicon glyphicon-plus\"></i></p>\n                                <p class=\"text-center blue\">添加广告图</p>\n                            </div>\n                            <cms-img-upload :callback=\"onUploadSuccess\" :data=\"item\"></cms-img-upload>\n                        </a>\n                    </div>\n                    <div class=\"col-sm-8\">\n                        <label class=\"control-label mgt-7px\">备注：添加图片尺寸为{{item.sug}}px</label>\n                        <cms-link exclude-plugins=\"link-brand\" v-model=\"item.link\"></cms-link>\n                    </div>\n                </div>\n            </template>\n        </div>\n    </div>\n</div>",
        "js": "function initialize(template){\n    //start ----\n                return {\n                    template:template,\n                    props:['moduleContext'],\n                    data:function(){\n                        var variables = this.moduleContext.variables();\n                        return {\n                            mode:[{\"width\":\"100%\",\"children\":[{\"width\":\"50%\",\"float\":\"left\",\"sort\":\"1\",\"link\":{},\"imgUrl\":\"http://cdn.oudianyun.com/lyf-local/trunk/back-cms/1490762821218_4264_66.png@base@tag=imgScale&q=80\",\"sug\":\"375x220\"},{\"width\":\"50%\",\"float\":\"left\",\"link\":{},\"imgUrl\":\"http://cdn.oudianyun.com/lyf-local/trunk/back-cms/1490762821218_4264_66.png@base@tag=imgScale&q=80\",\"sort\":\"2\",\"sug\":\"375x220\"}]},{\"width\":\"100%\",\"children\":[{\"width\":\"33.33%\",\"float\":\"left\",\"sort\":\"1\",\"link\":{},\"imgUrl\":\"http://cdn.oudianyun.com/lyf-local/trunk/back-cms/1490762931828_5351_34.png@base@tag=imgScale&q=80\",\"sug\":\"250x220\"},{\"width\":\"33.33%\",\"float\":\"left\",\"sort\":\"2\",\"link\":{},\"imgUrl\":\"http://cdn.oudianyun.com/lyf-local/trunk/back-cms/1490762931828_5351_34.png@base@tag=imgScale&q=80\",\"sug\":\"250x220\"},{\"width\":\"33.33%\",\"float\":\"left\",\"sort\":\"3\",\"link\":{},\"imgUrl\":\"http://cdn.oudianyun.com/lyf-local/trunk/back-cms/1490762931828_5351_34.png@base@tag=imgScale&q=80\",\"sug\":\"250x220\"}]},{\"width\":\"100%\",\"children\":[{\"width\":\"33.33%\",\"float\":\"left\",\"sort\":\"1\",\"link\":{},\"imgUrl\":\"http://cdn.oudianyun.com/lyf-local/trunk/back-cms/1490762990170_9821_68.png@base@tag=imgScale&q=80\",\"sug\":\"250x360\"},{\"width\":\"33.33%\",\"float\":\"left\",\"sort\":\"2\",\"link\":{},\"imgUrl\":\"http://cdn.oudianyun.com/lyf-local/trunk/back-cms/1490762990170_9821_68.png@base@tag=imgScale&q=80\",\"sug\":\"250x360\"},{\"width\":\"33.33%\",\"float\":\"left\",\"sort\":\"3\",\"link\":{},\"imgUrl\":\"http://cdn.oudianyun.com/lyf-local/trunk/back-cms/1490762990170_9821_68.png@base@tag=imgScale&q=80\",\"sug\":\"250x360\"}]},{\"width\":\"100%\",\"children\":[{\"width\":\"50%\",\"float\":\"left\",\"sort\":\"1\",\"link\":{},\"imgUrl\":\"http://cdn.oudianyun.com/lyf-local/trunk/back-cms/1490762821218_4264_66.png@base@tag=imgScale&q=80\",\"sug\":\"375x220\"},{\"width\":\"50%\",\"float\":\"left\",\"children\":[{\"width\":\"50%\",\"float\":\"left\",\"sort\":\"2\",\"link\":{},\"imgUrl\":\"http://cdn.oudianyun.com/lyf-local/trunk/back-cms/1490763038123_4144_63.png@base@tag=imgScale&q=80\",\"sug\":\"188x220\"},{\"width\":\"50%\",\"float\":\"left\",\"sort\":\"3\",\"link\":{},\"imgUrl\":\"http://cdn.oudianyun.com/lyf-local/trunk/back-cms/1490763038123_4144_63.png@base@tag=imgScale&q=80\",\"sug\":\"188x220\"}]}]},{\"width\":\"100%\",\"children\":[{\"width\":\"50%\",\"float\":\"left\",\"sort\":\"1\",\"link\":{},\"imgUrl\":\"http://cdn.oudianyun.com/lyf-local/trunk/back-cms/1490763110445_2198_29.png@base@tag=imgScale&q=80\",\"sug\":\"375x440\"},{\"width\":\"50%\",\"float\":\"left\",\"children\":[{\"width\":\"100%\",\"float\":\"left\",\"sort\":\"2\",\"link\":{},\"imgUrl\":\"http://cdn.oudianyun.com/lyf-local/trunk/back-cms/1490762821218_4264_66.png@base@tag=imgScale&q=80\",\"sug\":\"375x220\"},{\"width\":\"100%\",\"float\":\"left\",\"sort\":\"3\",\"link\":{},\"imgUrl\":\"http://cdn.oudianyun.com/lyf-local/trunk/back-cms/1490762821218_4264_66.png@base@tag=imgScale&q=80\",\"sug\":\"375x220\"}]}]},{\"width\":\"100%\",\"children\":[{\"width\":\"40%\",\"float\":\"left\",\"sort\":\"1\",\"link\":{},\"imgUrl\":\"http://cdn.oudianyun.com/lyf-local/trunk/back-cms/1490763154888_4261_56.png@base@tag=imgScale&q=80\",\"sug\":\"300x440\"},{\"width\":\"60%\",\"float\":\"left\",\"children\":[{\"width\":\"50%\",\"float\":\"left\",\"sort\":\"2\",\"link\":{},\"imgUrl\":\"http://cdn.oudianyun.com/lyf-local/trunk/back-cms/1490763248834_5041_64.png@base@tag=imgScale&q=80\",\"sug\":\"225x220\"},{\"width\":\"50%\",\"float\":\"left\",\"sort\":\"3\",\"link\":{},\"imgUrl\":\"http://cdn.oudianyun.com/lyf-local/trunk/back-cms/1490763248834_5041_64.png@base@tag=imgScale&q=80\",\"sug\":\"225x220\"},{\"width\":\"50%\",\"float\":\"left\",\"sort\":\"4\",\"link\":{},\"imgUrl\":\"http://cdn.oudianyun.com/lyf-local/trunk/back-cms/1490763248834_5041_64.png@base@tag=imgScale&q=80\",\"sug\":\"225x220\"},{\"width\":\"50%\",\"float\":\"left\",\"sort\":\"5\",\"link\":{},\"imgUrl\":\"http://cdn.oudianyun.com/lyf-local/trunk/back-cms/1490763248834_5041_64.png@base@tag=imgScale&q=80\",\"sug\":\"225x220\"}]}]},{\"width\":\"100%\",\"children\":[{\"width\":\"25%\",\"float\":\"left\",\"sort\":\"1\",\"link\":{},\"imgUrl\":\"http://cdn.oudianyun.com/lyf-local/trunk/back-cms/1490763038123_4144_63.png@base@tag=imgScale&q=80\",\"sug\":\"188x220\"},{\"width\":\"25%\",\"float\":\"left\",\"sort\":\"2\",\"link\":{},\"imgUrl\":\"http://cdn.oudianyun.com/lyf-local/trunk/back-cms/1490763038123_4144_63.png@base@tag=imgScale&q=80\",\"sug\":\"188x220\"},{\"width\":\"25%\",\"float\":\"left\",\"sort\":\"3\",\"link\":{},\"imgUrl\":\"http://cdn.oudianyun.com/lyf-local/trunk/back-cms/1490763038123_4144_63.png@base@tag=imgScale&q=80\",\"sug\":\"188x220\"},{\"width\":\"25%\",\"float\":\"left\",\"sort\":\"4\",\"link\":{},\"imgUrl\":\"http://cdn.oudianyun.com/lyf-local/trunk/back-cms/1490763038123_4144_63.png@base@tag=imgScale&q=80\",\"sug\":\"188x220\"}]},{\"width\":\"100%\",\"children\":[{\"width\":\"33.33%\",\"float\":\"left\",\"sort\":\"1\",\"link\":{},\"imgUrl\":\"http://cdn.oudianyun.com/lyf-local/trunk/back-cms/1490762931828_5351_34.png@base@tag=imgScale&q=80\",\"sug\":\"250x220\"},{\"width\":\"66.67%\",\"float\":\"left\",\"children\":[{\"width\":\"33.33%\",\"float\":\"left\",\"sort\":\"2\",\"link\":{},\"imgUrl\":\"http://cdn.oudianyun.com/lyf-local/trunk/back-cms/1490763363222_141_61.png@base@tag=imgScale&q=80\",\"sug\":\"167x220\"},{\"width\":\"33.33%\",\"float\":\"left\",\"sort\":\"3\",\"link\":{},\"imgUrl\":\"http://cdn.oudianyun.com/lyf-local/trunk/back-cms/1490763363222_141_61.png@base@tag=imgScale&q=80\",\"sug\":\"167x220\"},{\"width\":\"33.33%\",\"float\":\"left\",\"sort\":\"4\",\"link\":{},\"imgUrl\":\"http://cdn.oudianyun.com/lyf-local/trunk/back-cms/1490763363222_141_61.png@base@tag=imgScale&q=80\",\"sug\":\"167x220\"}]}]},{\"width\":\"100%\",\"children\":[{\"width\":\"40%\",\"float\":\"left\",\"sort\":\"1\",\"link\":{},\"imgUrl\":\"http://cdn.oudianyun.com/lyf-local/trunk/back-cms/1490763154888_4261_56.png@base@tag=imgScale&q=80\",\"sug\":\"300x440\"},{\"width\":\"60%\",\"float\":\"left\",\"children\":[{\"width\":\"50%\",\"float\":\"left\",\"sort\":\"2\",\"link\":{},\"imgUrl\":\"http://cdn.oudianyun.com/lyf-local/trunk/back-cms/1490763248834_5041_64.png@base@tag=imgScale&q=80\",\"sug\":\"225x220\"},{\"width\":\"50%\",\"float\":\"left\",\"sort\":\"3\",\"link\":{},\"imgUrl\":\"http://cdn.oudianyun.com/lyf-local/trunk/back-cms/1490763248834_5041_64.png@base@tag=imgScale&q=80\",\"sug\":\"225x220\"},{\"width\":\"100%\",\"float\":\"left\",\"sort\":\"4\",\"link\":{},\"imgUrl\":\"http://cdn.oudianyun.com/lyf-local/trunk/back-cms/1490764576739_1808_63.png@base@tag=imgScale&q=80\",\"sug\":\"450x220\"}]}]},{\"width\":\"100%\",\"children\":[{\"width\":\"40%\",\"float\":\"left\",\"sort\":\"1\",\"link\":{},\"imgUrl\":\"http://cdn.oudianyun.com/lyf-local/trunk/back-cms/1490763154888_4261_56.png@base@tag=imgScale&q=80\",\"sug\":\"300x440\"},{\"width\":\"60%\",\"float\":\"left\",\"children\":[{\"width\":\"100%\",\"float\":\"left\",\"sort\":\"2\",\"link\":{},\"imgUrl\":\"http://cdn.oudianyun.com/lyf-local/trunk/back-cms/1490764576739_1808_63.png@base@tag=imgScale&q=80\",\"sug\":\"450x220\"},{\"width\":\"50%\",\"float\":\"left\",\"sort\":\"3\",\"link\":{},\"imgUrl\":\"http://cdn.oudianyun.com/lyf-local/trunk/back-cms/1490763248834_5041_64.png@base@tag=imgScale&q=80\",\"sug\":\"225x220\"},{\"width\":\"50%\",\"float\":\"left\",\"sort\":\"4\",\"link\":{},\"imgUrl\":\"http://cdn.oudianyun.com/lyf-local/trunk/back-cms/1490763248834_5041_64.png@base@tag=imgScale&q=80\",\"sug\":\"225x220\"},]}]},{\"width\":\"100%\",\"children\":[{\"width\":\"40%\",\"float\":\"left\",\"sort\":\"1\",\"link\":{},\"imgUrl\":\"http://cdn.oudianyun.com/lyf-local/trunk/back-cms/1490763480664_1754_66.png@base@tag=imgScale&q=80\",\"sug\":\"300x450\"},{\"width\":\"60%\",\"float\":\"left\",\"children\":[{\"width\":\"33.33%\",\"float\":\"left\",\"sort\":\"2\",\"link\":{},\"imgUrl\":\"http://cdn.oudianyun.com/lyf-local/trunk/back-cms/1490763511448_7677_34.png@base@tag=imgScale&q=80\",\"sug\":\"150x150\"},{\"width\":\"33.33%\",\"float\":\"left\",\"sort\":\"3\",\"link\":{},\"imgUrl\":\"http://cdn.oudianyun.com/lyf-local/trunk/back-cms/1490763511448_7677_34.png@base@tag=imgScale&q=80\",\"sug\":\"150x150\"},{\"width\":\"33.33%\",\"float\":\"left\",\"sort\":\"4\",\"link\":{},\"imgUrl\":\"http://cdn.oudianyun.com/lyf-local/trunk/back-cms/1490763511448_7677_34.png@base@tag=imgScale&q=80\",\"sug\":\"150x150\"},{\"width\":\"33.33%\",\"float\":\"left\",\"sort\":\"5\",\"link\":{},\"imgUrl\":\"http://cdn.oudianyun.com/lyf-local/trunk/back-cms/1490763511448_7677_34.png@base@tag=imgScale&q=80\",\"sug\":\"150x150\"},{\"width\":\"33.33%\",\"float\":\"left\",\"sort\":\"6\",\"link\":{},\"imgUrl\":\"http://cdn.oudianyun.com/lyf-local/trunk/back-cms/1490763511448_7677_34.png@base@tag=imgScale&q=80\",\"sug\":\"150x150\"},{\"width\":\"33.33%\",\"float\":\"left\",\"sort\":\"7\",\"link\":{},\"imgUrl\":\"http://cdn.oudianyun.com/lyf-local/trunk/back-cms/1490763511448_7677_34.png@base@tag=imgScale&q=80\",\"sug\":\"150x150\"},{\"width\":\"33.33%\",\"float\":\"left\",\"sort\":\"8\",\"link\":{},\"imgUrl\":\"http://cdn.oudianyun.com/lyf-local/trunk/back-cms/1490763511448_7677_34.png@base@tag=imgScale&q=80\",\"sug\":\"150x150\"},{\"width\":\"33.33%\",\"float\":\"left\",\"sort\":\"9\",\"link\":{},\"imgUrl\":\"http://cdn.oudianyun.com/lyf-local/trunk/back-cms/1490763511448_7677_34.png@base@tag=imgScale&q=80\",\"sug\":\"150x150\"},{\"width\":\"33.33%\",\"float\":\"left\",\"sort\":\"10\",\"link\":{},\"imgUrl\":\"http://cdn.oudianyun.com/lyf-local/trunk/back-cms/1490763511448_7677_34.png@base@tag=imgScale&q=80\",\"sug\":\"150x150\"}]}]}],\n                            metroIndex:null,//默认选中第一个\n                            layout:variables.layout,\n                            cdata:variables.cdata,\n                            metroItems:[]\n                        };\n                    },\n                    mounted:function(){\n                        var self = this;\n                        this.initMetroItems();\n                    },\n                    watch:{\n                        metroIndex:function(newMetroIndex,oldMetroIndex){\n                            if(oldMetroIndex == null){\n                                return;\n                            }\n                            this.cdata = this.mode[newMetroIndex];\n                            this.metroItems = this.modeToMetroItems(this.cdata);\n                            this.moduleContext.variables().layout = newMetroIndex;\n                            this.moduleContext.variables().cdata = this.cdata;\n                        }\n                    },\n                    methods:{\n                        initMetroItems:function(){\n                            var layout = this.layout || 0;\n                            var cdata = this.cdata || [];\n                            if(cdata.children && cdata.children.length>0){\n                                this.metroIndex = layout;\n                                this.metroItems = this.modeToMetroItems(cdata);\n                            }\n                        },\n                        //图片上传成功回调\n                        onUploadSuccess: function(filepath, item) {\n                            item.imgUrl = filepath;\n                        },\n                        modeToMetroItems:function(mode){\n                            var metroItems = [];\n                            return this.parseMetros(mode,metroItems);\n                            \n                        },\n                        parseMetros:function(mode,metroItems){\n                            var self = this;\n                            if(mode.children && mode.children.length>0){\n                                _.each(mode.children,function(val,idx){\n                                    self.parseMetros(val,metroItems)\n                                });\n                            }else{\n                                metroItems.push(mode);\n                            }\n                            return metroItems;\n                        }\n                    }\n                }\n}",
        "clientDialect": "vue",
        "editorDialect": "vue",
        "isLazy": 0,
        "isFrozen": 0,
        "renderType": null,
        "canDel": 1,
        "variables": "%7B%0A%20%20%20%20%22layout%22%3A0%2C%0A%20%20%20%20%22cdata%22%3A%7B%0A%20%20%20%20%20%20%20%20%22width%22%3A%20%22100%25%22%2C%0A%20%20%20%20%20%20%20%20%22height%22%3A%20%22144px%22%2C%0A%20%20%20%20%20%20%20%20%22children%22%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22width%22%3A%20%2250%25%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22float%22%3A%20%22left%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22sort%22%3A%20%221%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22link%22%3A%20%7B%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22imgUrl%22%3A%20%22http%3A%2F%2Fcdn.oudianyun.com%2Flyf%2Fbranch%2Fback-cms%2F1486962495598_7555_169.jpg%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22sug%22%3A%22160x144%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22width%22%3A%20%2250%25%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22float%22%3A%20%22left%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22link%22%3A%20%7B%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22imgUrl%22%3A%20%22http%3A%2F%2Fcdn.oudianyun.com%2Flyf%2Fbranch%2Fback-cms%2F1486962495598_7555_169.jpg%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22sort%22%3A%20%222%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22sug%22%3A%22160x144%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%5D%0A%20%20%20%20%7D%0A%7D",
        "groupType": 1,
        "previewImg": "http://cdn.oudianyun.com/lyf/branch/back-cms/1483531581064_6987_95.jpg",
        "companyId": null,
        "front": false
    }, {
        "templateId": 379047000002011,
        "name": "双列商品",
        "templateCode": "goods",
        "templateVer": "v1",
        "css": "",
        "html": "<cms-goods :module-context=\"moduleContext\" :options=\"vars\" v-on:view-changed=\"viewChange\"></cms-goods>",
        "js": "function initialize(template){\n    return {\n        template:template,\n        props:['moduleContext'],\n        computed:{\n            vars:function(){\n                return this.moduleContext.variables();\n            }\n        },\n        methods:{\n            viewChange:function(items,mdContext){\n                var mock = {\n                    moduleDataList:mdContext.goodsList().moduleDataList,\n                    categoryList:mdContext.goodsList().categoryList || []\n                }\n                var vars = {\n                    displayNum: mdContext.variables().displayNum,\n                    displayBuyBtn: mdContext.variables().displayBuyBtn,\n                    displayNav: mdContext.variables().displayNav\n                }\n                this.moduleContext.variables(vars);\n                this.moduleContext.goodsList(mock);\n            }\n        }\n    }\n}",
        "clientDialect": "vue",
        "editorDialect": "vue",
        "isLazy": 0,
        "isFrozen": 0,
        "renderType": null,
        "canDel": 1,
        "variables": "%7B%0A%20%20%22displayNum%22%3A%20100%2C%0A%20%20%22displayBuyBtn%22%3A%200%2C%0A%20%20%22displayNav%22%3A%200%2C%0A%20%20%22goodsType%22%3A%200%2C%0A%20%20%22useBuyBtn%22%3Atrue%2C%0A%20%20%22useNav%22%3Atrue%2C%0A%20%20%22useBuyConditions%22%3Afalse%0A%7D",
        "groupType": 2,
        "previewImg": "http://cdn.oudianyun.com/lyf/branch/back-cms/1486973812515_9215_139.jpg",
        "companyId": null,
        "front": false
    }, {
        "templateId": 379047000002012,
        "name": "单行多图",
        "templateCode": "slideShow",
        "templateVer": "v1",
        "css": ".slide-show-bk-v1 .mgt10 {\n  margin-top: 10px; }\n\n.slide-show-bk-v1 .cms-img {\n  position: relative;\n  width: 110px;\n  height: 110px;\n  border-radius: 5px;\n  float: right;\n  border: solid 1px #ddd;\n  background: no-repeat center center;\n  background-size: 100% 100%; }\n  .slide-show-bk-v1 .cms-img div {\n    width: 100%;\n    height: 100%; }\n\n.slide-show-bk-v1 .cms-img.has-error {\n  color: #ff3333 !important;\n  border-color: #ff3333 !important; }\n\n.slide-show-bk-v1 .prev-img {\n  width: 100%;\n  height: 100%; }\n\n.slide-show-bk-v1 .re-upload {\n  display: inline-block;\n  padding: 5px;\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  width: 100%;\n  text-align: center;\n  background-color: #ddd;\n  color: #fff;\n  opacity: 0.9; }\n\n.slide-show-bk-v1 .no-img {\n  padding: 10px; }\n\n.slide-show-bk-v1 .create-item {\n  border: 2px dashed #c0c0c0;\n  text-align: center;\n  line-height: 40px;\n  height: 40px;\n  cursor: pointer; }\n\n.slide-show-bk-v1 .box-btn {\n  float: right;\n  margin-left: 1em;\n  cursor: pointer; }",
        "html": "<div class=\"slide-show-bk-v1\" v-cloak>\n     <div class=\"form-group\">\n        <label class=\"col-sm-3 control-label\">单个图片宽度比例:</label>\n        <div class=\"col-sm-2\">\n            <input-numeric v-model=\"vars.imgWidth\" :min=\"25\" :max=\"100\"></input-numeric>\n        </div>\n        <label class=\"control-label\">%</label>\n        <p class=\"col-sm-offset-3 col-sm-9 help-block\">（宽度比例需介于25至100之间）</p>\n    </div>\n    <template v-for=\"(item, index) in vars.items\">\n        <div class=\"form-group\">\n            <div class=\"col-sm-3\">\n                <div class=\"cms-img\" :class=\"{'has-error': $v.vars.items.$each[index].$error}\">\n                    <div v-if=\"item.imgUrl\">\n                        <img class=\"prev-img\" :src=\"item.imgUrl\" :alt=\"item.imgName\">\n                        <a class=\"re-upload\" href=\"javascript:void(0)\">重新上传</a>\n                    </div>\n                    <div class=\"no-img\" v-if=\"!item.imgUrl\">\n                        <p class=\"text-center\"><img src=\"http://static.lyf.dev.laiyifen.com/cms/front/ncms/images/add.jpg\"></p>\n                        <p class=\"text-center blue\">添加图片</p>\n                    </div>\n                    <cms-img-upload :callback=\"onUploadSuccess\" :data=\"index\"></cms-img-upload>\n                </div>\n            </div>\n            <div class=\"col-sm-8\">\n                <i class=\"fa fa-times box-btn\" aria-hidden=\"true\"\n                   v-show=\"vars.items.length > 1\"\n                   @click=\"removeItem(item)\"></i>\n                <i class=\"fa fa-arrow-down box-btn\" aria-hidden=\"true\"\n                   v-show=\"vars.items.length > 1 && vars.items.indexOf(item) != vars.items.length - 1\"\n                   @click=\"itemDown(item)\"></i>\n                <i class=\"fa fa-arrow-up box-btn\" aria-hidden=\"true\"\n                   v-show=\"vars.items.length > 1 && vars.items.indexOf(item) > 0\"\n                   @click=\"itemUp(item)\"></i>\n                <label class=\"control-label mgt-7px\">备注：添加图宽度自定义占比，高度自适应</label>\n                <div class=\"mgt10\">\n                    <input class=\"form-control magt15\" placeholder=\"请输入图片名称\" v-model=\"item.name\">\n                </div>\n                <cms-link exclude-plugins=\"link-brand\" v-model=\"item.link\" @input=\"setUrl(item)\"></cms-link>\n            </div>\n        </div>\n    </template>\n    <div class=\"form-group\">\n        <div class=\"col-sm-8  col-sm-offset-3\">\n            <div class=\"create-item\" @click=\"createItem\">添加</div>\n        </div>\n    </div>\n</div>",
        "js": "function initialize(template) {\n    var msgBus = appRender.msgBus;\n\n    return {\n        template: template,\n        props: ['moduleContext'],\n        data: function () {\n            var variables = this.moduleContext.variables();\n\n            return {\n                vars: variables\n            };\n        },\n        validations: function () {\n            return {\n                vars: {\n                    items: {\n                        $each: {\n                            imgUrl: {\n                                required: window.validators.required\n                            }\n                        }\n                    }\n                }\n            }\n        },\n        methods: {\n            //图片上传成功回调\n            onUploadSuccess: function (filepath, itemIdx) {\n                var self = this;\n                var item = this.vars.items[itemIdx];\n                item.imgUrl = filepath;\n                if(item.imgUrl){\n                   \n                    self.getImgWidHei(item.imgUrl);\n                }\n                this.showError();\n            },\n\n            setUrl: function (item) {\n                if(appRender.utils.isEmpty(item.link)){\n                    item.url = '';\n                    return;\n                }\n                item.url = item.link.data;\n            },\n            getImgWidHei:function(url){\n                var self = this;\n                var img = new Image();\n                img.src = url;\n                img.onload = function(){\n                    if(img.width && img.height){\n                        self.vars.aspectRatio = parseFloat((img.width/img.height).toFixed(2));\n                    }\n                    $(img).remove();\n                };\n                img.style.display = 'none';\n                $('body').append($(img));\n            },\n\n            itemDown: function (item) {\n                var idx = this.vars.items.indexOf(item),\n                    temp = this.vars.items[idx];\n                Vue.set(this.vars.items, idx, this.vars.items[idx + 1]);\n                Vue.set(this.vars.items, idx + 1, temp);\n                this.showError();\n            },\n\n            itemUp: function (item) {\n                var idx = this.vars.items.indexOf(item),\n                    temp = this.vars.items[idx];\n                Vue.set(this.vars.items, idx, this.vars.items[idx - 1]);\n                Vue.set(this.vars.items, idx - 1, temp);\n                this.showError();\n            },\n\n            //创建广告项\n            createItem: function () {\n                var data = {\n                    imgUrl: '',\n                    name: '',\n                    link: {},\n                    url: ''\n                };\n                this.vars.items.push(data);\n                this.moduleContext._error = this.$v.$invalid;\n            },\n\n            removeItem: function (item) {\n                var idx = this.vars.items.indexOf(item);\n\n                if (idx >= 0) {\n                    this.vars.items.splice(idx, 1);\n                    this.showError();\n                }\n            },\n\n            showError: function () {\n                this.$v.vars.$touch();\n                this.moduleContext._error = this.$v.$invalid;\n            }\n        },\n        mounted: function () {\n            this.showError();\n            msgBus.$on('show-error-msg', this.showError);\n        },\n        beforeDestroy: function () {\n            msgBus.$off('show-error-msg', this.showError);\n        }\n    }\n}\n//# sourceURL=slideShow.bk.js",
        "clientDialect": "vue",
        "editorDialect": "vue",
        "isLazy": 0,
        "isFrozen": 0,
        "renderType": null,
        "canDel": 1,
        "variables": "%7B%0A%20%20%22imgWidth%22%3A%2050%2C%0A%20%20%20%20%22aspectRatio%22%3A0%2C%0A%20%20%22items%22%3A%20%5B%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%22link%22%3A%20%7B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%22imgUrl%22%3A%20%22http%3A%2F%2Fstatic.lyf.dev.laiyifen.com%2Fcms%2Ffront%2Fncms%2Fimages%2F750x300.png%22%2C%0A%20%20%20%20%20%20%22desc%22%3A%20%22%E5%9B%BE1%22%0A%20%20%20%20%7D%2C%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%22link%22%3A%20%7B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%22imgUrl%22%3A%20%22http%3A%2F%2Fstatic.lyf.dev.laiyifen.com%2Fcms%2Ffront%2Fncms%2Fimages%2F750x300.png%22%2C%0A%20%20%20%20%20%20%22desc%22%3A%20%22%E5%9B%BE2%22%0A%20%20%20%20%7D%0A%20%20%5D%0A%7D%0A",
        "groupType": 1,
        "previewImg": "http://cdn.oudianyun.com/lyf/branch/back-cms/1483531679098_2712_107.jpg",
        "companyId": null,
        "front": false
    }, {
        "templateId": 379047000002018,
        "name": "单列多图",
        "templateCode": "h5-multipic",
        "templateVer": "v1",
        "css": ".index-image-bk-1 .mgt10 {\n  margin-top: 10px; }\n\n.index-image-bk-1 .margin-slider {\n  width: 85%;\n  height: 4px;\n  background-color: #ddd;\n  float: left;\n  margin-top: 17px;\n  padding-top: 0;\n  overflow: inherit; }\n\n.index-image-bk-1 .margin-slider .ui-slider-handle {\n  background-color: #23b7e5 !important;\n  top: -0.5em;\n  border-radius: 50%; }\n\n.index-image-bk-1 .margin-slider-value {\n  display: inline-block;\n  float: left;\n  margin-top: 5px;\n  margin-left: 10px;\n  line-height: 30px;\n  font-size: 16px; }\n\n.index-image-bk-1 .cms-img {\n  position: relative;\n  width: 110px;\n  height: 110px;\n  border-radius: 5px;\n  float: right;\n  border: solid 1px #ddd;\n  background-repeat: no-repeat;\n  background-position: center center;\n  background-size: 100% 100%; }\n  .index-image-bk-1 .cms-img div {\n    width: 100%;\n    height: 100%; }\n\n.index-image-bk-1 .cms-img.has-error {\n  color: #ff3333 !important;\n  border-color: #ff3333 !important; }\n\n.index-image-bk-1 .prev-img {\n  width: 100%;\n  height: 100%; }\n\n.index-image-bk-1 .re-upload {\n  display: inline-block;\n  padding: 5px;\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  width: 100%;\n  text-align: center;\n  background-color: #ddd;\n  color: #fff;\n  opacity: 0.9; }\n\n.index-image-bk-1 .no-img {\n  padding: 10px; }\n\n.index-image-bk-1 .create-item {\n  border: 2px dashed #c0c0c0;\n  text-align: center;\n  line-height: 40px;\n  height: 40px;\n  cursor: pointer; }\n\n.index-image-bk-1 .box-btn {\n  float: right;\n  margin-left: 1em;\n  cursor: pointer; }",
        "html": "<div class=\"form-horizental index-image-bk-1\">\n    <div class=\"form-group\">\n        <label class=\"col-sm-3 control-label height-label\">图片间距:</label>\n        <div class=\"col-sm-8\">\n            <div id=\"image-margin\" class=\"margin-slider ui-slider ui-slider-horizontal ui-widget ui-widget-content ui-corner-all\">\n                <span class=\"ui-slider-handle ui-state-default ui-corner-all\" tabindex=\"0\" style=\"left: 100%;\"></span>\n            </div>\n            <span class=\"margin-slider-value\">{{vars.margin}}px</span>\n        </div>\n    </div>\n    <template v-for=\"(data, index) in vars.images\">\n        <div class=\"line line-dashed b-b line-lg\"></div>\n        <div class=\"form-group\">\n            <div class=\"col-sm-3\">\n                <div class=\"cms-img\" :class=\"{'has-error': $v.vars.images.$each[index].$error}\">\n                    <div v-if=\"data.src\">\n                        <img class=\"prev-img\" :src=\"data.src\" :alt=\"data.desc\">\n                        <a class=\"re-upload\" href=\"javascript:void(0)\">重新上传</a>\n                    </div>\n                    <div class=\"no-img\" v-if=\"!data.src\">\n                        <p class=\"text-center\"><img src=\"http://static.lyf.dev.laiyifen.com/cms/front/ncms/images/add.jpg\"></p>\n                        <p class=\"text-center blue\">添加图片</p>\n                    </div>\n                    <cms-img-upload :callback=\"addImage\" :data=\"data\"></cms-img-upload>\n                </div>\n            </div>\n            <div class=\"col-sm-8\">\n                <i class=\"fa fa-times box-btn\" aria-hidden=\"true\"\n                   v-show=\"vars.images.length > 1\"\n                   @click=\"removeItem(data)\"></i>\n                <i class=\"fa fa-arrow-down box-btn\" aria-hidden=\"true\"\n                   v-show=\"vars.images.length > 1 && vars.images.indexOf(data) != vars.images.length - 1\"\n                   @click=\"itemDown(data)\"></i>\n                <i class=\"fa fa-arrow-up box-btn\" aria-hidden=\"true\"\n                   v-show=\"vars.images.length > 1 && vars.images.indexOf(data) > 0\"\n                   @click=\"itemUp(data)\"></i>\n                <label class=\"control-label mgt-7px\">备注：添加图宽度100%，高度自适应</label>\n                <div class=\"mgt10\">\n                    <input class=\"form-control magt15\" placeholder=\"请输入图片名称\" v-model=\"data.desc\">\n                </div>\n                <cms-link exclude-plugins=\"link-brand\" v-model=\"data.link\" @input=\"setUrl(data)\"></cms-link>\n            </div>\n        </div>\n    </template>\n    <div class=\"form-group\">\n        <div class=\"col-sm-8  col-sm-offset-3\">\n            <div class=\"create-item\" @click=\"addItem\">添加</div>\n        </div>\n    </div>\n</div>",
        "js": "/**\n * Created by Jaron on 12/26/2016.\n */\nfunction initialize(template) {\n    var msgBus = appRender.msgBus;\n\n    return {\n        template: template,\n        props: ['moduleContext'],\n        data: function () {\n            return {\n                vars: this.moduleContext.variables()\n            }\n        },\n        validations: function () {\n            return {\n                vars: {\n                    images: {\n                        $each: {\n                            src: {\n                                required: window.validators.required\n                            }\n                        }\n                    }\n                }\n            }\n        },\n        mounted: function () {\n            var self = this;\n            $.each(self.vars.images,function(idx,item){\n                if(item.src){\n                    self.getImgWidHei(item.src,item);\n                }\n            });\n            self.initSlider();\n            self.showError();\n            msgBus.$on('show-error-msg', self.showError);\n        },\n        beforeDestroy: function () {\n            msgBus.$off('show-error-msg', this.showError);\n        },\n        methods: {\n            initSlider: function (vars) {\n                var imageMargin = $(\"#image-margin\");\n                var self = this;\n                self.slide = imageMargin.slider({\n                    min: 0,\n                    max: 10,\n                    value: self.vars.margin,\n                    slide: function (e, ui) {\n                        self.vars.margin = ui.value;\n                    }\n                });\n            },\n\n            getImgWidHei:function(url,data){\n                var img = new Image();\n                img.src = url;\n                img.onload = function(){\n                    data.oriWidth = img.width || '100%';\n                    data.oriHeight = img.height || 'auto';\n                    $(img).remove();\n                };\n                img.style.display = 'none';\n                $('body').append($(img));\n            },\n\n            itemDown: function (item) {\n                var idx = this.vars.images.indexOf(item),\n                    temp = this.vars.images[idx];\n                Vue.set(this.vars.images, idx, this.vars.images[idx + 1]);\n                Vue.set(this.vars.images, idx + 1, temp);\n                this.showError();\n            },\n\n            itemUp: function (item) {\n                var idx = this.vars.images.indexOf(item),\n                    temp = this.vars.images[idx];\n                Vue.set(this.vars.images, idx, this.vars.images[idx - 1]);\n                Vue.set(this.vars.images, idx - 1, temp);\n                this.showError();\n            },\n\n            addImage: function (url, data) {\n                if (url != null) {\n                    data.src = url;\n                    this.getImgWidHei(url,data);\n                }\n                this.showError();\n            },\n\n            setUrl: function (item) {\nif(appRender.utils.isEmpty(item.link)){\nitem.url = '';\n                    return;\n                }\n                item.url = item.link.data;\n            },\n\n            addItem: function () {\n                var data = {\n                    src: '',\n                    link: {},\n                    url: '',\n                    desc: ''\n                };\n                this.vars.images.push(data);\n                this.moduleContext._error = this.$v.$invalid;\n            },\n\n            removeItem: function (item) {\n                var idx = this.vars.images.indexOf(item);\n\n                if (idx >= 0) {\n                    this.vars.images.splice(idx, 1);\n                    this.showError();\n                }\n            },\n\n            showError: function () {\n                this.$v.vars.$touch();\n                this.moduleContext._error = this.$v.$invalid;\n            }\n        }\n    }\n}\n//# sourceURL=h5_multipic.bk.js",
        "clientDialect": "vue",
        "editorDialect": "vue",
        "isLazy": 0,
        "isFrozen": 0,
        "renderType": null,
        "canDel": 1,
        "variables": "%7B%22images%22%3A%5B%7B%22link%22%3A%7B%7D%2C%22url%22%3A%22%22%2C%22src%22%3A%22http%3A%2F%2Fstatic.lyf.dev.laiyifen.com%2Fcms%2Ffront%2Fncms%2Fimages%2F750x300.png%22%2C%22desc%22%3A%22%E5%9B%BE1%22%2C%22oriWidth%22%3A%22%22%2C%22oriHeight%22%3A%22%22%7D%5D%2C%22margin%22%3A1%7D",
        "groupType": 1,
        "previewImg": "http://cdn.oudianyun.com/lyf/branch/back-cms/1486977440480_5702_177.jpg",
        "companyId": null,
        "front": false
    }, {
        "templateId": 379047000002019,
        "name": "轮播",
        "templateCode": "slider",
        "templateVer": "v1",
        "css": ".slider-bk-v1 {\n  /**\n   * Item\n   */ }\n.slider-bk-v1 .mgt10 {\n    margin-top: 10px; }\n  .slider-bk-v1 .cms-img {\n    position: relative;\n    width: 110px;\n    height: 110px;\n    border-radius: 5px;\n    float: right;\n    border: solid 1px #ddd;\n    background-repeat: no-repeat;\n    background-position: center center;\n    background-size: 100% 100%; }\n    .slider-bk-v1 .cms-img div {\n      width: 100%;\n      height: 100%; }\n  .slider-bk-v1 .cms-img.has-error {\n    color: #ff3333 !important;\n    border-color: #ff3333 !important; }\n  .slider-bk-v1 .prev-img {\n    width: 100%;\n    height: 100%; }\n  .slider-bk-v1 .re-upload {\n    display: inline-block;\n    padding: 5px;\n    position: absolute;\n    bottom: 0;\n    left: 0;\n    width: 100%;\n    text-align: center;\n    background-color: #ddd;\n    color: #fff;\n    opacity: 0.9; }\n  .slider-bk-v1 .no-img {\n    padding: 10px; }\n  .slider-bk-v1 .create-item {\n    border: 2px dashed #c0c0c0;\n    text-align: center;\n    line-height: 40px;\n    height: 40px;\n    cursor: pointer; }\n  .slider-bk-v1 .box-btn {\n    float: right;\n    margin-left: 1em;\n    cursor: pointer; }",
        "html": "<div class=\"form-horizontal slider-bk-v1\">\n    <template v-for=\"(data, index) in vars.images\">\n        <div class=\"line line-dashed b-b line-lg\"></div>\n        <div class=\"form-group\">\n            <div class=\"col-sm-3\">\n                <div class=\"cms-img\" :class=\"{'has-error': $v.vars.images.$each[index].$error}\">\n                    <div v-if=\"data.src\">\n                        <img class=\"prev-img\" :src=\"data.src\" :alt=\"data.desc\">\n                        <a class=\"re-upload\" href=\"javascript:void(0)\">重新上传</a>\n                    </div>\n                    <div class=\"no-img\" v-if=\"!data.src\">\n                        <p class=\"text-center\"><img src=\"http://static.lyf.dev.laiyifen.com/cms/front/ncms/images/add.jpg\"></p>\n                        <p class=\"text-center blue\">添加图片</p>\n                    </div>\n                    <cms-img-upload :callback=\"addImage\" :data=\"data\"></cms-img-upload>\n                </div>\n            </div>\n            <div class=\"col-sm-8\">\n                <i class=\"fa fa-times box-btn\" aria-hidden=\"true\"\n                   v-show=\"vars.images.length > 1\"\n                   @click=\"removeItem(data)\"></i>\n                <i class=\"fa fa-arrow-down box-btn\" aria-hidden=\"true\"\n                   v-show=\"vars.images.length > 1 && vars.images.indexOf(data) != vars.images.length - 1\"\n                   @click=\"itemDown(data)\"></i>\n                <i class=\"fa fa-arrow-up box-btn\" aria-hidden=\"true\"\n                   v-show=\"vars.images.length > 1 && vars.images.indexOf(data) > 0\"\n                   @click=\"itemUp(data)\"></i>\n                <label class=\"control-label mgt-7px\">备注：添加图宽度100%，高度自适应</label>\n                <div class=\"mgt10\">\n                    <input class=\"form-control magt15\" placeholder=\"请输入图片名称\" v-model=\"data.desc\">\n                </div>\n                <cms-link exclude-plugins=\"link-brand\" v-model=\"data.link\" @input=\"setUrl(data)\"></cms-link>\n            </div>\n        </div>\n    </template>\n    <div class=\"form-group\">\n        <div class=\"col-sm-8  col-sm-offset-3\">\n            <div class=\"create-item\" @click=\"addItem\">添加</div>\n        </div>\n    </div>\n</div>",
        "js": "/**\n * Created by Jaron on 12/26/2016.\n */\nfunction initialize(template) {\n    var msgBus = appRender.msgBus;\n\n    return {\n        template: template,\n        props: ['moduleContext'],\n        data: function () {\n            return {\n                vars: this.moduleContext.variables()\n            }\n        },\n        validations: function () {\n            return {\n                vars: {\n                    images: {\n                        $each: {\n                            src: {\n                                required: window.validators.required\n                            }\n                        }\n                    }\n                }\n            }\n        },\n        mounted: function () {\n            var self = this;\n            $.each(self.vars.images, function (idx, item) {\n                if (item.src) {\n                    self.getImgWidHei(item.src, item);\n                }\n            });\n\n            self.showError();\n            msgBus.$on('show-error-msg', self.showError);\n        },\n        beforeDestroy: function () {\n            msgBus.$off('show-error-msg', this.showError);\n        },\n        methods: {\n            addImage: function (url, data) {\n                if (url != null) {\n                    data.src = url;\n                    this.getImgWidHei(url, data);\n                }\n                this.showError();\n            },\n\n            getImgWidHei: function (url, data) {\n                var img = new Image();\n                img.src = url;\n                img.onload = function () {\n                    data.oriWidth = img.width || '100%';\n                    data.oriHeight = img.height || 'auto';\n                    $(img).remove();\n                };\n                img.style.display = 'none';\n                $('body').append($(img));\n            },\n\n            setUrl: function (item) {\nif(appRender.utils.isEmpty(item.link)){\nitem.url = {};\n                    return;\n                }\n                item.url = item.link.data;\n            },\n\n            itemDown: function (item) {\n                var idx = this.vars.images.indexOf(item),\n                    temp = this.vars.images[idx];\n                Vue.set(this.vars.images, idx, this.vars.images[idx + 1]);\n                Vue.set(this.vars.images, idx + 1, temp);\n                this.showError();\n            },\n\n            itemUp: function (item) {\n                var idx = this.vars.images.indexOf(item),\n                    temp = this.vars.images[idx];\n                Vue.set(this.vars.images, idx, this.vars.images[idx - 1]);\n                Vue.set(this.vars.images, idx - 1, temp);\n                this.showError();\n            },\n\n            addItem: function () {\n                var data = {\n                    src: '',\n                    link: {},\n                    url: '',\n                    desc: ''\n                };\n                this.vars.images.push(data);\n                this.moduleContext._error = this.$v.$invalid;\n            },\n\n            removeItem: function (item) {\n                var idx = this.vars.images.indexOf(item);\n\n                if (idx >= 0) {\n                    this.vars.images.splice(idx, 1);\n                    this.showError();\n                }\n            },\n\n            showError: function () {\n                this.$v.vars.$touch();\n                this.moduleContext._error = this.$v.$invalid;\n            }\n        }\n    }\n}\n//# sourceURL=slider.bk.js",
        "clientDialect": "vue",
        "editorDialect": "vue",
        "isLazy": 0,
        "isFrozen": 0,
        "renderType": null,
        "canDel": 1,
        "variables": "%7B%0A%20%20%22images%22%3A%20%5B%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%22link%22%3A%20%7B%7D%2C%0A%20%20%20%20%20%20%22src%22%3A%20%22http%3A%2F%2Fstatic.lyf.dev.laiyifen.com%2Fcms%2Ffront%2Fncms%2Fimages%2F750x300.png%22%2C%0A%20%20%20%20%20%20%22url%22%3A%20%22%22%2C%0A%20%20%20%20%20%20%22desc%22%3A%20%22%E5%9B%BE1%22%2C%0A%20%20%20%20%20%20%22oriWidth%22%3A%22%22%2C%0A%20%20%20%20%20%20%22oriHeight%22%3A%22%22%0A%20%20%20%20%7D%2C%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%22link%22%3A%20%7B%7D%2C%0A%20%20%20%20%20%20%22url%22%3A%20%22%22%2C%0A%20%20%20%20%20%20%22src%22%3A%20%22http%3A%2F%2Fstatic.lyf.dev.laiyifen.com%2Fcms%2Ffront%2Fncms%2Fimages%2F750x300.png%22%2C%0A%20%20%20%20%20%20%22desc%22%3A%20%22%E5%9B%BE2%22%2C%0A%20%20%20%20%20%20%22oriWidth%22%3A%22%22%2C%0A%20%20%20%20%20%20%22oriHeight%22%3A%22%22%0A%20%20%20%20%7D%0A%20%20%5D%0A%7D",
        "groupType": 1,
        "previewImg": "http://cdn.oudianyun.com/lyf/branch/back-cms/1483531959599_6996_104.jpg",
        "companyId": null,
        "front": false
    }, {
        "templateId": 379047000002020,
        "name": "单列小图",
        "templateCode": "goods-r1c1s",
        "templateVer": "v1",
        "css": "",
        "html": "<cms-goods :module-context=\"moduleContext\" :options=\"vars\" v-on:view-changed=\"viewChange\"></cms-goods>",
        "js": "function initialize(template){\n    return {\n        template:template,\n        props:['moduleContext'],\n        computed:{\n            vars:function(){\n\n                return this.moduleContext.variables();\n            }\n        },\n        methods:{\n            viewChange:function(items,mdContext){\n                var mock = {\n                    moduleDataList:mdContext.goodsList().moduleDataList,\n                    categoryList:mdContext.goodsList().categoryList || []\n                }\n                var vars = {\n                    displayNum: mdContext.variables().displayNum,\n                    displayBuyBtn: mdContext.variables().displayBuyBtn,\n                    displayNav: mdContext.variables().displayNav\n                }\n                this.moduleContext.variables(vars);\n                this.moduleContext.goodsList(mock);\n            }\n        }\n    }\n}",
        "clientDialect": "vue",
        "editorDialect": "vue",
        "isLazy": 0,
        "isFrozen": 0,
        "renderType": null,
        "canDel": 1,
        "variables": "%7B%0A%20%20%22displayNum%22%3A%20100%2C%0A%20%20%22displayBuyBtn%22%3A%200%2C%0A%20%20%22displayNav%22%3A%200%2C%0A%20%20%22goodsType%22%3A%200%2C%0A%20%20%22useBuyBtn%22%3Atrue%2C%0A%20%20%22useNav%22%3Atrue%2C%0A%20%20%22useBuyConditions%22%3Afalse%0A%7D",
        "groupType": 2,
        "previewImg": "http://cdn.oudianyun.com/lyf/branch/back-cms/1486973919202_2788_197.jpg",
        "companyId": null,
        "front": false
    }, {
        "templateId": 1006017609000005,
        "name": "单行滚动",
        "templateCode": "goods-r1cn",
        "templateVer": "v1",
        "css": "",
        "html": "<cms-goods :module-context=\"moduleContext\" :options=\"vars\" v-on:view-changed=\"viewChange\"></cms-goods>",
        "js": "function initialize(template){\n    return {\n        template:template,\n        props:['moduleContext'],\n        computed:{\n            vars:function(){\n                return this.moduleContext.variables();\n            }\n        },\n        methods:{\n            viewChange:function(items,mdContext){\n                \n                var vars = {\n                    displayNum: mdContext.variables().displayNum,\n                    displayBuyBtn: mdContext.variables().displayBuyBtn,\n                    displayNav: mdContext.variables().displayNav,\n                    goodsType: mdContext.variables().goodsType\n                };\n                this.moduleContext.variables(vars);\n               \n            }\n        }\n    }\n}\n//# sourceURL=goods-r1cn.bk.js",
        "clientDialect": "vue",
        "editorDialect": "vue",
        "isLazy": 0,
        "isFrozen": 0,
        "renderType": null,
        "canDel": 1,
        "variables": "%7B%0A%20%20%22displayNum%22%3A%20100%2C%0A%20%20%22displayBuyBtn%22%3A%200%2C%0A%20%20%22displayNav%22%3A%200%2C%0A%20%20%22goodsType%22%3A%200%2C%0A%20%20%22useBuyBtn%22%3Atrue%2C%0A%20%20%22useNav%22%3Atrue%2C%0A%20%20%22useBuyConditions%22%3Afalse%0A%7D",
        "groupType": 2,
        "previewImg": "http://cdn.oudianyun.com/lyf-local/trunk/back-cms/1491465307794_8631_29.jpg@base@tag=imgScale&q=80",
        "companyId": null,
        "front": false
    }],
    "trace": "12!$9#@2%&10!$,165486,62929977330714550103061"
}